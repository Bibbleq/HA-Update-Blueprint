{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "decluttering_templates": {
        "template_socket": {
          "default": [
            {
              "icon": "mdi:power-socket-de"
            },
            {
              "name": "Outlets"
            }
          ],
          "card": {
            "type": "custom:mushroom-template-card",
            "entity": "[[entity_id]]",
            "primary": "[[name]]",
            "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
            "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
            "icon": "[[icon]]",
            "layout": "vertical",
            "fill_container": true,
            "tap_action": {
              "action": "toggle",
              "confirmation": true
            },
            "hold_action": {
              "action": "more-info"
            }
          }
        }
      },
      "title": "Artillerigatan",
      "views": [
        {
          "title": "Home",
          "path": "default_view",
          "icon": "",
          "badges": [],
          "cards": [
            {
              "type": "custom:mushroom-chips-card",
              "chips": [
                {
                  "type": "template",
                  "entity": "sensor.electricity_price",
                  "content": "{{ state_attr(entity, 'future_prices_curr_price_level') | default('unknown') }}: {{ states(entity) | float(0) | round(2) }} kr/kWh",
                  "icon": "mdi:lightning-bolt-circle",
                  "card_mod": null,
                  "style": "@keyframes wobbling {\n  0% {\n    transform: rotate(-5deg);\n  }\n  100% {\n    transform: rotate(5deg);\n  }\n}\nha-card {\n  --chip-box-shadow: 0px 0px;\n  animation: wobbling 10s linear infinite alternate;\n  {% set price_level = state_attr('sensor.electricity_price', 'future_prices_curr_price_level') %}\n  {% if price_level == 'Very expensive' %}\n    animation-duration: 2s;\n    --chip-background: red;\n  {% elif price_level == 'Expensive' %}\n    animation-duration: 3s;\n    --chip-background: orange;\n  {% elif price_level == 'Cheap' %}\n    animation-duration: 0s;\n    --chip-background: darkgreen;\n  {% elif price_level == 'Very cheap' %}\n    animation-duration: 0s;\n    --chip-background: green;\n  {%- else -%}\n    animation-duration: 0s;\n  {%- endif %}\n}\n"
                },
                {
                  "type": "alarm-control-panel",
                  "entity": "alarm_control_panel.eufy_hub"
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.home_travelling_mode",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "sensor.civil_solar_day_status",
                    "icon": ""
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "device_tracker.vw_passat_position",
                      "state_not": "Parking area at SKF HK3"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "device_tracker.vw_passat_position"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "person.edward_firmo",
                      "state_not": "home"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "person.edward_firmo",
                    "use_entity_picture": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "person.carolina_costa",
                      "state_not": "home"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "person.carolina_costa",
                    "use_entity_picture": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "person.dory",
                      "state_not": "home"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "person.dory",
                    "use_entity_picture": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "person.skal",
                      "state_not": "home"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "person.skal",
                    "use_entity_picture": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.wv_passat_stopped_and_unlocked",
                      "state_not": "locked"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "sensor.wv_passat_stopped_and_unlocked"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "vacuum.hall_roomba",
                      "state_not": "docked"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "vacuum.hall_roomba"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.balcony_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.balcony_all_lights",
                    "content_info": "name",
                    "name": "Balcony",
                    "use_light_color": true,
                    "icon": "mdi:string-lights"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.bathroom_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.bathroom_all_lights",
                    "content_info": "name",
                    "name": "Bathroom",
                    "use_light_color": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.bedroom_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.bedroom_all_lights",
                    "content_info": "name",
                    "use_light_color": true,
                    "name": "Bedroom"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.corridor_lights_all",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.corridor_lights_all",
                    "content_info": "name",
                    "use_light_color": true,
                    "name": "Corridor"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.guest_bathroom_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.guest_bathroom_all_lights",
                    "content_info": "name",
                    "use_light_color": true,
                    "name": "Guest bathroom"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.guest_room_wall_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.guest_room_wall_lights",
                    "content_info": "name",
                    "name": "Guest room",
                    "use_light_color": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.hall_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.hall_all_lights",
                    "content_info": "name",
                    "name": "Hall",
                    "use_light_color": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.kitchen_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.kitchen_all_lights",
                    "content_info": "name",
                    "name": "Kitchen",
                    "use_light_color": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.living_room_all_lights",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.living_room_all_lights",
                    "content_info": "name",
                    "name": "Living room",
                    "use_light_color": true
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "light.office_ceiling_lines",
                      "state": "on"
                    }
                  ],
                  "chip": {
                    "type": "light",
                    "entity": "light.office_ceiling_lines",
                    "content_info": "name",
                    "name": "Office",
                    "use_light_color": true,
                    "icon": ""
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.kitchen_dishwasher_operation_state",
                      "state_not": "Ready"
                    },
                    {
                      "entity": "sensor.kitchen_dishwasher_operation_state",
                      "state_not": "Inactive"
                    }
                  ],
                  "chip": {
                    "type": "entity",
                    "entity": "sensor.kitchen_dishwasher_operation_state",
                    "use_entity_picture": false
                  }
                }
              ]
            },
            {
              "type": "custom:mod-card",
              "style": {
                "hui-horizontal-stack-card$": "hui-vertical-stack-card {\n  margin-left: 0px !important;\n  margin-right: 0px !important;\n  margin-bottom: 0px !important;\n  width: 79%;\n  flex: unset !important; \n}\nmushroom-light-card {\n  margin-right: 0px !important;\n  margin-bottom: 0px !important;\n  flex: unset !important; \n}\n"
              },
              "card": {
                "type": "horizontal-stack",
                "cards": [
                  {
                    "type": "custom:vertical-stack-in-card",
                    "cards": [
                      {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:mushroom-template-card",
                            "layout": "vertical",
                            "fill_container": true,
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.volume_down",
                              "data": {},
                              "target": {
                                "entity_id": "media_player.bedroom_tv_samsung_universal"
                              }
                            },
                            "entity": "media_player.bedroom_tv_samsung_universal",
                            "icon": "mdi:volume-minus",
                            "icon_color": "{{ iif(is_state(entity,'on'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}"
                          },
                          {
                            "type": "custom:mushroom-template-card",
                            "entity": "media_player.bedroom_tv_samsung_universal",
                            "layout": "vertical",
                            "fill_container": true,
                            "icon": "{{ iif(is_state(entity,'on'), iif(state_attr(entity, 'active_child'), 'mdi:television', 'mdi:television-pause'), 'mdi:television-off') }}",
                            "icon_color": "{{ iif(is_state(entity,'on'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}",
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "toggle"
                            },
                            "hold_action": {
                              "action": "more-info"
                            }
                          },
                          {
                            "type": "custom:mushroom-template-card",
                            "layout": "vertical",
                            "fill_container": true,
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.volume_up",
                              "data": {},
                              "target": {
                                "entity_id": "media_player.bedroom_tv_samsung_universal"
                              }
                            },
                            "entity": "media_player.bedroom_tv_samsung_universal",
                            "icon": "mdi:volume-plus",
                            "icon_color": "{{ iif(is_state(entity,'on'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}"
                          }
                        ]
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "media_player.bedroom_tv_samsung_universal",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mini-media-player",
                          "entity": "media_player.bedroom_tv_samsung_universal",
                          "sound_mode": "icon",
                          "toggle_power": false,
                          "volume_step": "1",
                          "min_volume": "0",
                          "info": "scroll",
                          "max_volume": "20",
                          "hide": {
                            "power": true,
                            "name": true,
                            "icon": true,
                            "play_pause": true,
                            "volume_level": false,
                            "icon_type": "none",
                            "next": true,
                            "prev": true,
                            "source": true
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "custom:mushroom-light-card",
                    "entity": "light.home_all_lights",
                    "layout": "vertical",
                    "name": "All lights",
                    "fill_container": true,
                    "show_brightness_control": false,
                    "collapsible_controls": true,
                    "secondary_info": "none"
                  }
                ]
              }
            },
            {
              "type": "picture-elements",
              "image": "local/pics/artillerigatan/floor_plant_2d_empty_white.png",
              "dark_mode_image": "local/pics/floor_plant_2d_empty_black.png",
              "elements": [
                {
                  "entity": "light.curtains_lights_segment_kitchen",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "78%",
                    "left": "36%"
                  }
                },
                {
                  "entity": "weather.home",
                  "type": "state-label",
                  "attribute": "temperature",
                  "suffix": "ºC",
                  "style": {
                    "top": "97%",
                    "left": "9%",
                    "font-size": "15px"
                  }
                },
                {
                  "entity": "weather.home",
                  "type": "state-icon",
                  "style": {
                    "top": "88%",
                    "left": "9%"
                  }
                },
                {
                  "entity": "weather.home",
                  "type": "state-label",
                  "style": {
                    "top": "92%",
                    "left": "9%",
                    "font-size": "10px"
                  }
                },
                {
                  "entity": "sensor.home_average_room_temperature_rounded",
                  "type": "state-label",
                  "style": {
                    "top": "10%",
                    "left": "87%",
                    "font-size": "15px"
                  }
                },
                {
                  "entity": "cover.balcony_curtain",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "81%",
                    "left": "28%",
                    "transform": "rotate(-90deg)"
                  }
                },
                {
                  "entity": "light.balcony_lamp_light",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "90%",
                    "left": "24%",
                    "transform": "scaleX(-1)"
                  }
                },
                {
                  "entity": "light.balcony_string_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "84%",
                    "left": "19%"
                  }
                },
                {
                  "entity": "light.bathroom_all_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "34%",
                    "left": "15%"
                  }
                },
                {
                  "entity": "climate.bathroom_thermostat",
                  "type": "state-label",
                  "attribute": "current_temperature",
                  "suffix": "°C",
                  "style": {
                    "top": "28%",
                    "left": "9%",
                    "font-size": "10px"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.bathroom_motion",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.bathroom_motion",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "34%",
                        "left": "23%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.bathroom_door",
                      "state": "off"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.bathroom_door",
                      "type": "state-icon",
                      "icon": "mdi:dots-vertical",
                      "style": {
                        "top": "33%",
                        "left": "25%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.bathroom_shower_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.bathroom_shower_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "41%",
                        "left": "8%"
                      }
                    }
                  ]
                },
                {
                  "entity": "cover.bedroom_curtains_dual",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "2.5%",
                    "left": "48%"
                  }
                },
                {
                  "entity": "light.bedroom_edward_light",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "8%",
                    "left": "61%"
                  }
                },
                {
                  "entity": "light.bedroom_carol_light",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "24%",
                    "left": "61%"
                  }
                },
                {
                  "entity": "media_player.bedroom_tv_samsung_universal",
                  "type": "state-icon",
                  "state_color": false,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "color": "green",
                    "top": "12%",
                    "left": "35%",
                    "transform": "rotate(-90deg)"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.bedroom_dogs_bed_occupied",
                      "state": "off"
                    }
                  ],
                  "elements": [
                    {
                      "type": "state-icon",
                      "entity": "binary_sensor.bedroom_dogs_bed_occupied",
                      "state_color": false,
                      "style": {
                        "top": "8%",
                        "left": "40%"
                      }
                    }
                  ]
                },
                {
                  "entity": "sensor.bedroom_hygrometer_temperature",
                  "type": "state-label",
                  "style": {
                    "top": "16%",
                    "left": "55%",
                    "font-size": "10px"
                  }
                },
                {
                  "entity": "light.bedroom_closet_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "41%",
                    "left": "44%"
                  }
                },
                {
                  "entity": "light.corridor_all_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "40%",
                    "left": "31%"
                  }
                },
                {
                  "entity": "sensor.corridor_air_quality_temperature",
                  "type": "state-label",
                  "style": {
                    "top": "46%",
                    "left": "27%",
                    "font-size": "10px",
                    "transform": "rotate(90deg)"
                  }
                },
                {
                  "entity": "sensor.corridor_air_quality_humidity",
                  "type": "state-label",
                  "style": {
                    "top": "46%",
                    "left": "25%",
                    "font-size": "10px",
                    "transform": "rotate(90deg)"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.corridor_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.corridor_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "30%",
                        "left": "31%"
                      }
                    }
                  ]
                },
                {
                  "entity": "light.guest_bathroom_all_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "43%",
                    "left": "59%"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.guest_bathroom_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.guest_bathroom_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "48%",
                        "left": "61%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.guest_bathroom_shower_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.guest_bathroom_shower_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "37%",
                        "left": "56%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.guest_bathroom_door",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.guest_bathroom_door",
                      "type": "state-icon",
                      "icon": "mdi:dots-vertical",
                      "style": {
                        "top": "53%",
                        "left": "56%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.guest_room_door",
                      "state": "off"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.guest_room_door",
                      "type": "state-icon",
                      "icon": "mdi:dots-horizontal",
                      "style": {
                        "top": "61%",
                        "left": "69%"
                      }
                    }
                  ]
                },
                {
                  "entity": "light.guest_room_closet_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "84%",
                    "left": "91%"
                  }
                },
                {
                  "entity": "cover.guest_room_shutter_cover",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "97%",
                    "left": "77%"
                  }
                },
                {
                  "entity": "light.guest_room_wall_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "88%",
                    "left": "67%"
                  }
                },
                {
                  "entity": "climate.guest_room_thermostat",
                  "type": "state-label",
                  "attribute": "current_temperature",
                  "suffix": "°C",
                  "style": {
                    "top": "73%",
                    "left": "75%",
                    "font-size": "10px"
                  }
                },
                {
                  "entity": "climate.guest_room_closet_thermostat",
                  "type": "state-label",
                  "attribute": "current_temperature",
                  "suffix": "°C",
                  "style": {
                    "top": "90%",
                    "left": "91%",
                    "font-size": "10px"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.guest_room_motion",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.guest_room_motion",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "65%",
                        "left": "75%"
                      }
                    }
                  ]
                },
                {
                  "entity": "sensor.hall_panel_temperature",
                  "type": "state-label",
                  "style": {
                    "top": "52%",
                    "left": "74%",
                    "font-size": "10px",
                    "transform": "rotate(90deg)"
                  }
                },
                {
                  "entity": "light.hall_all_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "55%",
                    "left": "75%"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.hall_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.hall_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "59%",
                        "left": "66%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "device_tracker.hall_intercom",
                      "state_not": "home"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "device_tracker.hall_intercom",
                      "type": "state-icon",
                      "style": {
                        "top": "57%",
                        "left": "83%",
                        "--state-device_tracker-inactive-color": "red"
                      }
                    }
                  ]
                },
                {
                  "entity": "light.kitchen_bench_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "53%",
                    "left": "8%"
                  }
                },
                {
                  "entity": "light.kitchen_table_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "67%",
                    "left": "25%"
                  }
                },
                {
                  "entity": "climate.kitchen_thermostat",
                  "type": "state-label",
                  "attribute": "current_temperature",
                  "suffix": "°C",
                  "style": {
                    "top": "76%",
                    "left": "19%",
                    "font-size": "10px"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.kitchen_bench_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.kitchen_bench_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "51%",
                        "left": "20%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.kitchen_table_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.kitchen_table_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "61%",
                        "left": "20%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.kitchen_dishwasher_operation_state",
                      "state": "Run"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "sensor.kitchen_dishwasher_operation_state",
                      "type": "state-icon",
                      "icon": "mdi:dishwasher",
                      "state_color": false,
                      "style": {
                        "transform": "rotate(-90deg)",
                        "top": "61%",
                        "left": "2%",
                        "color": "red",
                        "--paper-item-icon-color": "var(--rgb-red-color)"
                      },
                      "card_mod": {
                        "style": {
                          "ha-icon": {
                            "$": "ha-svg-icon {\n  color: red;\n  animation: wobbling 1s linear infinite alternate;\n}\n@keyframes wobbling {\n  0% {\n    transform: rotate(-5deg);\n  }\n  100% {\n    transform: rotate(+5deg);\n  }\n}\n"
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.laundry_dryer_status",
                      "state_not": "idle"
                    },
                    {
                      "entity": "sensor.laundry_dryer_status",
                      "state_not": "drying"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "sensor.laundry_dryer_status",
                      "type": "state-icon",
                      "state_color": false,
                      "style": {
                        "top": "28%",
                        "left": "22%",
                        "color": "green",
                        "--paper-item-icon-color": "var(--rgb-green-color)"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.laundry_dryer_status",
                      "state": "drying"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "sensor.laundry_dryer_status",
                      "type": "state-icon",
                      "icon": "mdi:tumble-dryer",
                      "state_color": true,
                      "style": {
                        "top": "28%",
                        "left": "22%",
                        "--paper-item-icon-color": "red"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.laundry_washing_machine_status",
                      "state_not": "idle"
                    },
                    {
                      "entity": "sensor.laundry_washing_machine_status",
                      "state_not": "completed"
                    }
                  ],
                  "elements": [
                    {
                      "type": "icon",
                      "icon": "mdi:washing-machine",
                      "style": {
                        "top": "28%",
                        "left": "16.5%",
                        "color": "red"
                      },
                      "card_mod": {
                        "style": {
                          "ha-icon": {
                            "$": "ha-svg-icon {\n  color: red;\n  animation: wobbling 1s linear infinite alternate;\n}\n@keyframes wobbling {\n  0% {\n    transform: rotate(-45deg);\n  }\n  100% {\n    transform: rotate(+45deg);\n  }\n}\n"
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.laundry_washing_machine_status",
                      "state": "completed"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "sensor.laundry_washing_machine_status",
                      "type": "state-icon",
                      "state_color": false,
                      "style": {
                        "top": "28%",
                        "left": "16.5%",
                        "color": "green",
                        "--paper-item-icon-color": "var(--rgb-green-color)"
                      }
                    }
                  ]
                },
                {
                  "entity": "climate.living_room_thermostat",
                  "type": "state-label",
                  "attribute": "current_temperature",
                  "suffix": "°C",
                  "style": {
                    "top": "85%",
                    "left": "49%",
                    "font-size": "10px"
                  }
                },
                {
                  "entity": "cover.living_room_blinds",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "95%",
                    "left": "49%"
                  }
                },
                {
                  "entity": "media_player.living_room_tv_sony_universal",
                  "type": "state-icon",
                  "style": {
                    "--rgb-state-media-player-on-color": "var(--rgb-red-color)",
                    "--rgb-state-media-player-color": "var(--rgb-amber-color)",
                    "--rgb-state-media-player-off-color": "var(--state-icon-color)",
                    "top": "72%",
                    "left": "54%",
                    "transform": "rotate(90deg)"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.living_room_toggle_tv"
                  }
                },
                {
                  "entity": "cover.office_shutter_1_cover",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "8%",
                    "left": "-2%",
                    "transform": "rotate(-90deg)"
                  }
                },
                {
                  "entity": "cover.office_shutter_2_cover",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "2%",
                    "left": "16%"
                  }
                },
                {
                  "entity": "light.office_ceiling_lines",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "14%",
                    "left": "19%"
                  }
                },
                {
                  "entity": "sensor.office_hygrometer_temperature",
                  "type": "state-label",
                  "style": {
                    "top": "22%",
                    "left": "20%",
                    "font-size": "10px"
                  }
                },
                {
                  "entity": "cover.office_roller_blind_1_cover",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "13%",
                    "left": "3%",
                    "transform": "rotate(-90deg)"
                  }
                },
                {
                  "entity": "cover.office_roller_blind_2_cover",
                  "type": "state-icon",
                  "state_color": false,
                  "style": {
                    "top": "2%",
                    "left": "23%"
                  }
                },
                {
                  "entity": "switch.office_workstation_outlets_displays",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "6%",
                    "left": "7%"
                  }
                },
                {
                  "entity": "light.office_workstation_lights",
                  "type": "state-icon",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "6%",
                    "left": "19%"
                  }
                },
                {
                  "entity": "switch.office_workstation_power_strip_switch_1",
                  "type": "state-icon",
                  "icon": "mdi:electron-framework",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "style": {
                    "top": "6%",
                    "left": "27%"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_motion_occupancy",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.office_motion_occupancy",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "20%",
                        "left": "32%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_workstation_motion",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.office_workstation_motion",
                      "type": "state-icon",
                      "icon": "mdi:motion-sensor",
                      "style": {
                        "top": "10%",
                        "left": "12%"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_door",
                      "state": "off"
                    },
                    {
                      "entity": "input_boolean.home_display_motion_sensors",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "binary_sensor.office_door",
                      "type": "state-icon",
                      "icon": "mdi:dots-horizontal",
                      "style": {
                        "top": "25%",
                        "left": "32%"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:sankey-chart",
              "show_names": true,
              "wide": true,
              "sections": [
                {
                  "entities": [
                    {
                      "entity_id": "sensor.total_power",
                      "name": "Total",
                      "remaining": {
                        "name": "Other"
                      },
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.balcony_total_power",
                        "sensor.bathroom_total_power",
                        "sensor.bedroom_total_power",
                        "sensor.corridor_total_power",
                        "sensor.guest_bathroom_total_power",
                        "sensor.guest_room_total_power",
                        "sensor.hall_total_power",
                        "sensor.kitchen_total_power",
                        "sensor.laundry_total_power",
                        "sensor.living_room_total_power",
                        "sensor.media_centre_total_power",
                        "sensor.office_total_power"
                      ]
                    }
                  ]
                },
                {
                  "entities": [
                    {
                      "entity_id": "sensor.balcony_total_power",
                      "name": "Balcony",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.balcony_lamp_light_power",
                        "sensor.balcony_lamp_sockets_power",
                        "sensor.balcony_string_lights_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.bathroom_total_power",
                      "name": "Bathroom",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.bathroom_ceiling_lights_power",
                        "sensor.bathroom_mirror_light_power",
                        "sensor.bathroom_mirror_outlets_power",
                        "sensor.bathroom_towel_warmer_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.bedroom_total_power",
                      "name": "Bedroom",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.bedroom_ceiling_lights_power",
                        "sensor.bedroom_closet_lights_power",
                        "sensor.bedroom_closet_outlets_power",
                        "sensor.bedroom_outlets_carol_power",
                        "sensor.bedroom_outlets_edward_power",
                        "sensor.bedroom_tv_rack_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.corridor_total_power",
                      "name": "Corridor",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.corridor_ceiling_lights_power",
                        "sensor.corridor_outlet_1_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.guest_bathroom_total_power",
                      "name": "Guest bathroom",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.guest_bathroom_ceiling_light_power",
                        "sensor.guest_bathroom_mirror_lights_power",
                        "sensor.guest_bathroom_mirror_outlets_power",
                        "sensor.guest_bathroom_towel_warmer_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.guest_room_total_power",
                      "name": "Guest room",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.guest_room_closet_lights_power",
                        "sensor.guest_room_closet_outlets_power",
                        "sensor.guest_room_door_outlets_ceiling_lights_power",
                        "sensor.guest_room_door_outlets_outlet_power",
                        "sensor.guest_room_windows_outlets_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.hall_total_power",
                      "name": "Hall",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.hall_light_switch_light_power",
                        "sensor.hall_light_switch_panel_power",
                        "sensor.hall_outlets_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.kitchen_total_power",
                      "name": "Kitchen",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.kitchen_bench_total_power",
                        "sensor.kitchen_ceiling_lights_table_lights_power",
                        "sensor.kitchen_ceiling_lights_windows_lights_power",
                        "sensor.kitchen_cooktop_total_power",
                        "sensor.kitchen_dishwasher_outlet_power",
                        "sensor.kitchen_microwave_power",
                        "sensor.kitchen_oven_power",
                        "sensor.kitchen_refrigeration_freezer_outlet_power",
                        "sensor.kitchen_refrigeration_fridge_outlet_power",
                        "sensor.kitchen_windows_wall_outlet_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.laundry_total_power",
                      "name": "Laundry",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.laundry_bench_outlets_power",
                        "sensor.laundry_dryer_outlet_power",
                        "sensor.laundry_washing_machine_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.living_room_total_power",
                      "name": "Living room",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.living_room_lights_map_wall_power",
                        "sensor.living_room_lights_tv_wall_power",
                        "sensor.living_room_map_wall_outlets_power",
                        "sensor.living_room_tv_rack_outlets_power",
                        "sensor.living_room_windows_wall_outlets_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.media_centre_total_power",
                      "name": "Media centre",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.media_centre_switch_outlets_power",
                        "sensor.media_centre_switch_power_strip_power"
                      ]
                    },
                    {
                      "entity_id": "sensor.office_total_power",
                      "name": "Office",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red",
                      "children": [
                        "sensor.office_windows_outlets_ceiling_lights_power",
                        "sensor.office_windows_outlets_outlets_power"
                      ]
                    }
                  ]
                },
                {
                  "entities": [
                    {
                      "entity_id": "sensor.balcony_lamp_light_power",
                      "name": "Lamp - Light",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.balcony_lamp_sockets_power",
                      "name": "Lamp - Sockets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.balcony_string_lights_power",
                      "name": "String lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bathroom_ceiling_lights_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bathroom_mirror_light_power",
                      "name": "Mirror''s lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bathroom_mirror_outlets_power",
                      "name": "Mirror''s outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bathroom_towel_warmer_power",
                      "name": "Towel warmer",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_ceiling_lights_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_outlets_carol_power",
                      "name": "Outlets - Carol",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_outlets_edward_power",
                      "name": "Outlets - Edward",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_tv_rack_power",
                      "name": "TV rack",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_closet_lights_power",
                      "name": "Lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.bedroom_closet_outlets_power",
                      "name": "Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.corridor_ceiling_lights_power",
                      "name": "Lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.corridor_outlet_1_power",
                      "name": "Outlets 1",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_bathroom_ceiling_light_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_bathroom_mirror_lights_power",
                      "name": "Mirror''s lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_bathroom_mirror_outlets_power",
                      "name": "Mirror''s outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_bathroom_towel_warmer_power",
                      "name": "Towel warmer",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_room_closet_lights_power",
                      "name": "Closet - Lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_room_closet_outlets_power",
                      "name": "Closet - Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_room_door_outlets_ceiling_lights_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_room_door_outlets_outlet_power",
                      "name": "Door''s outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.guest_room_windows_outlets_power",
                      "name": "Windows outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.hall_light_switch_light_power",
                      "name": "Lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.hall_light_switch_panel_power",
                      "name": "Panel",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.hall_outlets_power",
                      "name": "Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_bench_total_power",
                      "name": "Bench",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_ceiling_lights_table_lights_power",
                      "name": "Table''s lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_ceiling_lights_windows_lights_power",
                      "name": "Windows lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_cooktop_total_power",
                      "name": "Cooktop",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_dishwasher_outlet_power",
                      "name": "Dishwasher",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_microwave_power",
                      "name": "Microwave",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_oven_power",
                      "name": "Oven",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_refrigeration_freezer_outlet_power",
                      "name": "Freezer",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_refrigeration_fridge_outlet_power",
                      "name": "Fridge",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.kitchen_windows_wall_outlet_power",
                      "name": "Windows outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.laundry_bench_outlets_power",
                      "name": "Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.laundry_dryer_outlet_power",
                      "name": "Dryer",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.laundry_washing_machine_power",
                      "name": "Washing machine",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.living_room_lights_map_wall_power",
                      "name": "Map''s lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.living_room_lights_tv_wall_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.living_room_map_wall_outlets_power",
                      "name": "Map''s outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.living_room_tv_rack_outlets_power",
                      "name": "TV rack",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.living_room_windows_wall_outlets_power",
                      "name": "Windows outles",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.media_centre_switch_outlets_power",
                      "name": "Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.media_centre_switch_power_strip_power",
                      "name": "Outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.office_windows_outlets_ceiling_lights_power",
                      "name": "Ceiling lights",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    },
                    {
                      "entity_id": "sensor.office_windows_outlets_outlets_power",
                      "name": "Windows outlets",
                      "color_on_state": true,
                      "color_limit": 220,
                      "color_above": "red"
                    }
                  ]
                }
              ]
            },
            {
              "type": "picture-elements",
              "image": "/local/pics/passat.png",
              "elements": [
                {
                  "type": "image",
                  "entity": "switch.vw_passat_electric_climatisation",
                  "image": "/local/pics/blank.png",
                  "style": {
                    "top": "39.5%",
                    "left": "55%",
                    "width": "43%"
                  },
                  "state_image": {
                    "on": "/local/pics/passat_heat.png"
                  }
                },
                {
                  "type": "image",
                  "entity": "binary_sensor.vw_passat_external_power",
                  "image": "/local/pics/blank.png",
                  "style": {
                    "top": "62.8%",
                    "left": "21.2%",
                    "width": "43%"
                  },
                  "state_image": {
                    "on": "/local/pics/passatcharging.png"
                  }
                },
                {
                  "type": "image",
                  "entity": "binary_sensor.vw_passat_parking_light",
                  "image": "/local/pics/blank.png",
                  "style": {
                    "top": "66.8%",
                    "left": "37.2%",
                    "width": "37%"
                  },
                  "state_image": {
                    "on": "/local/pics/passat_light.png"
                  }
                },
                {
                  "type": "image",
                  "entity": "lock.vw_passat_door_locked",
                  "image": "/local/pics/blank.png",
                  "style": {
                    "top": "42.3%",
                    "left": "57%",
                    "width": "2%"
                  },
                  "state_image": {
                    "locked": "/local/pics/blink.gif"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "lock.vw_passat_door_locked",
                      "state_not": "locked"
                    }
                  ],
                  "elements": [
                    {
                      "type": "state-icon",
                      "entity": "lock.vw_passat_door_locked",
                      "style": {
                        "top": "90%",
                        "left": "35%"
                      }
                    }
                  ]
                },
                {
                  "type": "icon",
                  "icon": "mdi:details",
                  "style": {
                    "top": "50%",
                    "left": "10%"
                  },
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/config/devices/device/39f38da7888f9019b44f408bf6e9bc1d"
                  }
                },
                {
                  "type": "state-icon",
                  "entity": "switch.vw_passat_electric_climatisation",
                  "hold_action": "toggle",
                  "style": {
                    "top": "90%",
                    "left": "45%"
                  }
                },
                {
                  "type": "state-icon",
                  "entity": "switch.vw_passat_window_heater",
                  "hold_action": "toggle",
                  "style": {
                    "top": "90%",
                    "left": "55%"
                  }
                },
                {
                  "type": "state-icon",
                  "entity": "switch.vw_passat_charging",
                  "style": {
                    "top": "85%",
                    "left": "75%"
                  }
                },
                {
                  "type": "state-label",
                  "entity": "sensor.vw_passat_electric_range",
                  "style": {
                    "top": "95%",
                    "left": "75%"
                  }
                },
                {
                  "type": "state-icon",
                  "entity": "sensor.vw_passat_fuel_level",
                  "style": {
                    "top": "85%",
                    "left": "90%"
                  }
                },
                {
                  "type": "state-label",
                  "entity": "sensor.vw_passat_combustion_range",
                  "style": {
                    "top": "95%",
                    "left": "90%"
                  }
                },
                {
                  "type": "state-label",
                  "entity": "sensor.vw_passat_last_connected",
                  "prefix": "Last connected: ",
                  "style": {
                    "top": "5%",
                    "left": "75%",
                    "font-size": "10px"
                  }
                },
                {
                  "type": "state-label",
                  "entity": "sensor.vw_passat_battery_level",
                  "style": {
                    "top": "78%",
                    "left": "75%",
                    "font-size": "8px"
                  }
                },
                {
                  "type": "state-label",
                  "entity": "binary_sensor.vw_passat_vehicle_moving",
                  "style": {
                    "top": "5%",
                    "left": "25%",
                    "font-size": "8px"
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "media_player.living_room_tv_sony_universal",
                  "state": "idle"
                }
              ],
              "card": {
                "type": "custom:slider-button-card",
                "entity": "media_player.living_room_tv_sony_dlna",
                "slider": {
                  "direction": "left-right",
                  "background": "triangle",
                  "use_state_color": true,
                  "use_percentage_bg_opacity": false,
                  "show_track": true,
                  "toggle_on_click": false,
                  "force_square": false,
                  "min": 0,
                  "max": 100
                },
                "show_name": true,
                "show_state": true,
                "compact": true,
                "icon": {
                  "show": false,
                  "use_state_color": false,
                  "tap_action": {
                    "action": "more-info"
                  }
                },
                "action_button": {
                  "mode": "toggle",
                  "icon": "mdi:power",
                  "show": false,
                  "show_spinner": true,
                  "tap_action": {
                    "action": "toggle"
                  }
                },
                "name": "TV Sony:"
              }
            },
            {
              "type": "custom:mod-card",
              "style": {
                "hui-horizontal-stack-card$": "hui-vertical-stack-card {\n  margin-left: 0px !important;\n  margin-right: 0px !important;\n  margin-bottom: 0px !important;\n  width: 79%;\n  flex: unset !important; \n}\nmushroom-light-card {\n  margin-right: 0px !important;\n  margin-bottom: 0px !important;\n  flex: unset !important; \n}\n"
              },
              "card": {
                "type": "horizontal-stack",
                "cards": [
                  {
                    "type": "custom:vertical-stack-in-card",
                    "cards": [
                      {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:mushroom-template-card",
                            "layout": "vertical",
                            "fill_container": true,
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.volume_down",
                              "data": {},
                              "target": {
                                "entity_id": "media_player.living_room_tv_sony_universal"
                              }
                            },
                            "entity": "media_player.living_room_tv_sony_universal",
                            "icon": "mdi:volume-minus",
                            "icon_color": "{{ iif(is_state(entity,'idle'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}"
                          },
                          {
                            "type": "custom:mushroom-template-card",
                            "entity": "media_player.living_room_tv_sony_universal",
                            "layout": "vertical",
                            "fill_container": true,
                            "icon": "{{ iif(is_state(entity,'idle'), iif(state_attr(entity, 'active_child'), 'mdi:television', 'mdi:television-pause'), 'mdi:television-off') }}",
                            "icon_color": "{{ iif(is_state(entity,'idle'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}",
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "toggle"
                            },
                            "hold_action": {
                              "action": "more-info"
                            }
                          },
                          {
                            "type": "custom:mushroom-template-card",
                            "layout": "vertical",
                            "fill_container": true,
                            "primary_info": "none",
                            "secondary_info": "none",
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.volume_up",
                              "data": {},
                              "target": {
                                "entity_id": "media_player.living_room_tv_sony_universal"
                              }
                            },
                            "entity": "media_player.living_room_tv_sony_universal",
                            "icon": "mdi:volume-plus",
                            "icon_color": "{{ iif(is_state(entity,'idle'), iif(state_attr(entity, 'active_child'), 'blue', 'red'), '') }}"
                          }
                        ]
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "media_player.living_room_tv_sony_universal",
                            "state": "idle"
                          }
                        ],
                        "card": {
                          "type": "custom:mini-media-player",
                          "entity": "media_player.living_room_tv_sony_universal",
                          "sound_mode": "icon",
                          "toggle_power": false,
                          "volume_step": "1",
                          "min_volume": "0",
                          "info": "scroll",
                          "max_volume": "30",
                          "hide": {
                            "power": true,
                            "name": true,
                            "icon": true,
                            "play_pause": true,
                            "volume_level": false,
                            "icon_type": "none",
                            "next": true,
                            "prev": true,
                            "source": true
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "custom:mushroom-light-card",
                    "entity": "light.home_all_lights",
                    "layout": "vertical",
                    "name": "All lights",
                    "fill_container": true,
                    "show_brightness_control": false,
                    "collapsible_controls": true,
                    "secondary_info": "none"
                  }
                ]
              }
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mushroom-entity-card",
                  "entity": "input_boolean.home_party_mode",
                  "layout": "vertical",
                  "name": "Party mode",
                  "fill_container": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "hold_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "layout": "vertical",
                  "fill_container": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "hold_action": {
                    "action": "more-info"
                  },
                  "entity": "input_boolean.home_travelling_mode",
                  "name": "Traveling mode"
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "layout": "vertical",
                  "fill_container": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "hold_action": {
                    "action": "more-info"
                  },
                  "entity": "input_boolean.home_empty",
                  "name": "Empty home"
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "layout": "vertical",
                  "fill_container": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "hold_action": {
                    "action": "more-info"
                  },
                  "entity": "input_boolean.home_display_motion_sensors",
                  "name": "Show motion"
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "light.home_all_lights",
                  "state_not": "off"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "cards": [
                  {
                    "type": "custom:mushroom-title-card",
                    "title": "{{ iif(is_state('light.home_all_lights', 'on'), 'Lights on:', 'No lights on') }}",
                    "alignment": "center"
                  },
                  {
                    "square": true,
                    "columns": 2,
                    "type": "grid",
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.balcony_lamp_light",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.balcony_lamp_light",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "layout": "vertical",
                          "name": "Balcony - Lamp",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.balcony_string_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.balcony_string_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "layout": "vertical",
                          "name": "Balcony - String lights",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.bathroom_all_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.bathroom_all_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Bathroom",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.bedroom_closet_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.bedroom_closet_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Bedroom - Closet",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.bedroom_carol_light",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.bedroom_carol_light",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Bedroom - Carol",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.bedroom_edward_light",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.bedroom_edward_light",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Bedroom - Edward",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.corridor_lights_all",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.corridor_lights_all",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Corridor",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.guest_room_closet_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.guest_room_closet_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Guest room - Closet",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.guest_bathroom_all_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.guest_bathroom_all_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Guest bathroom",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.guest_room_wall_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.guest_room_wall_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Guest room",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.hall_all_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.hall_all_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Hall",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": false,
                          "show_color_control": false,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.kitchen_bench_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.kitchen_bench_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Kitchen - Bench",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.kitchen_table_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.kitchen_table_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Kitchen - Table",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.office_ceiling_lines",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.office_ceiling_lines",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Office - Lines",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.office_workstation_lights",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.office_workstation_lights",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Office - Workstation",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "light.curtains_lights_segment_kitchen",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "custom:mushroom-light-card",
                          "entity": "light.curtains_lights_segment_kitchen",
                          "show_brightness_control": true,
                          "collapsible_controls": true,
                          "secondary_info": "none",
                          "name": "Curtain's lights",
                          "layout": "vertical",
                          "use_light_color": true,
                          "show_color_temp_control": true,
                          "show_color_control": true,
                          "fill_container": true
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "sensor.electricity_price",
                  "state_not": "unavailable"
                },
                {
                  "entity": "sensor.electricity_price",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "custom:plotly-graph",
                "refresh_interval": 300,
                "hours_to_show": 36,
                "time_offset": "1d",
                "autorange_after_scroll": true,
                "layout": {
                  "xaxis": {
                    "rangeselector": {
                      "y": 1.2,
                      "buttons": [
                        {
                          "count": 1,
                          "step": "day"
                        },
                        {
                          "count": 7,
                          "step": "day"
                        },
                        {
                          "count": 12,
                          "step": "day"
                        }
                      ]
                    }
                  },
                  "yaxis": {
                    "rangemode": "tozero",
                    "tickformat": ".1f"
                  },
                  "yaxis2": {
                    "rangemode": "tozero",
                    "tickformat": ".2f",
                    "fixrange": true
                  },
                  "yaxis9": {
                    "visible": false,
                    "fixedrange": true
                  }
                },
                "round": 2,
                "default": null,
                "entities": [
                  {
                    "entity": "sensor.total_energy_utility_meter",
                    "name": "Energy consumption",
                    "type": "bar",
                    "marker": {
                      "color": "rgba(165,165,0,0.6)"
                    },
                    "texttemplate": " %{y:.2f} kr/kWh",
                    "statistic": "state",
                    "period": "hour",
                    "filters": [
                      {
                        "fn": "(params) => {\n  const ys = [];\n  ys.push(0); \n  for (let i = 1; i < params.statistics.length; i++){\n    ys.push(Math.max(0,params.statistics[i].state-params.statistics[i-1].state));\n  }\n  return { ys };\n}"
                      }
                    ]
                  },
                  {
                    "entity": "sensor.electricity_price",
                    "yaxis": "y2",
                    "unit_of_measurement": "kr/kWh",
                    "line": {
                      "color": "rgba(255, 165, 0, 1)",
                      "width": 3
                    },
                    "filters": [
                      {
                        "store_var": "electricity_price"
                      },
                      {
                        "exponential_moving_average": {
                          "alpha": 1
                        }
                      }
                    ],
                    "show_value": true,
                    "texttemplate": " %{y:.2f} kr/kWh"
                  },
                  {
                    "entity": "sensor.electricity_price",
                    "yaxis": "y2",
                    "name": "Future price",
                    "fill": "tozeroy",
                    "fillcolor": "rgba(255, 165, 0,.1)",
                    "line": {
                      "color": "rgba(255, 165, 0, 1)",
                      "width": 1,
                      "dash": "dot"
                    },
                    "filters": [
                      {
                        "fn": "({ meta, vars }) => ({\n  xs: [vars.electricity_price.xs.slice(-1)[0],...meta.future_prices.map(({ startsAt }) => new Date(startsAt))],\n  ys: [vars.electricity_price.ys.slice(-1)[0],...meta.future_prices.map(({ total }) => total)],\n})"
                      },
                      {
                        "exponential_moving_average": {
                          "alpha": 1
                        }
                      }
                    ]
                  },
                  {
                    "entity": "",
                    "name": "Now",
                    "yaxis": "y9",
                    "showlegend": false,
                    "line": {
                      "width": 1,
                      "dash": "dot",
                      "color": "deepskyblue"
                    },
                    "x": "$fn () => [Date.now(), Date.now()]",
                    "y": "$fn () => [0,1]"
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "sensor.vasttrafik_departure_table",
                  "state_not": "unknown"
                },
                {
                  "entity": "sensor.vasttrafik_departure_table",
                  "state_not": "unavailable"
                }
              ],
              "card": {
                "type": "custom:flex-table-card",
                "title": "Västtrafik - Svingeln",
                "strict": true,
                "max_rows": 20,
                "sort_by": [
                  "Departure+"
                ],
                "entities": {
                  "include": "sensor.vasttrafik_departure_table"
                },
                "columns": [
                  {
                    "name": "Sort column",
                    "data": "Departure",
                    "align": "center",
                    "hidden": true,
                    "modify": "Math.round((Date.parse((x.rtDate ? x.rtDate : x.Date) + \" \" + (x.rtTime ? x.rtTime : x.Time)) - Date.now())/60000)"
                  },
                  {
                    "name": "Line",
                    "data": "Departure",
                    "modify": "x.sname",
                    "align": "center",
                    "hidden": true,
                    "style": "'background-color: ' + x.bgColor + ';' + 'color: ' + x.fgColor + ';'"
                  },
                  {
                    "name": "Line",
                    "data": "Departure",
                    "modify": "'<div style=\"padding: 1px 1px 4px 1px; height: 16px; color: ' + x.fgColor + '; background-color: ' + x.bgColor + '\">&nbsp;' + x.sname + '&nbsp;</div>'",
                    "align": "center"
                  },
                  {
                    "name": "Direction",
                    "data": "Departure",
                    "modify": "x.direction"
                  },
                  {
                    "name": "Departure",
                    "data": "Departure",
                    "align": "center",
                    "modify": "if (typeof(x.rtTime) == \"string\" & typeof(x.rtDate) == \"string\") \n  { \n    var minutes = Math.round(Math.max(0,(Date.parse(x.rtDate + \" \" + x.rtTime) - Date.now())/60000));\n    if (minutes>=60 || isNaN(minutes))\n      {{ x.rtTime }}\n    else if (minutes == 0)\n      \"Now\"\n    else\n      {{ minutes }}\n  }\nelse\n  { \n    var minutes = Math.round(Math.max(0,(Date.parse(x.date + \" \" + x.time) - Date.now())/60000));\n    if (minutes>=60 || isNaN(minutes))\n      {{ x.time }}\n    else if (minutes == 0)\n      \"Now\"\n    else\n      {{ minutes }}\n  }"
                  },
                  {
                    "name": "Platform",
                    "data": "Departure",
                    "align": "center",
                    "modify": "x.track + '&nbsp;<ha-icon icon=\"mdi:' + x.type.toLowerCase().replace(\"tram\", \"tram-side\") +  '\"></ha-icon>'"
                  }
                ],
                "css": {
                  "tbody tr:nth-child(odd)": "background-color: #535B64;",
                  "tbody tr:nth-child(even)": "background-color: #3C4650;"
                },
                "style": "ha-card {\n  --mdc-icon-size: 16px;\n  background-color: #3C4650;\n}\n"
              }
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Vasttrafik",
          "path": "vasttrafik",
          "type": "panel",
          "icon": "mdi:tram-side",
          "badges": [],
          "cards": [
            {
              "type": "iframe",
              "url": "https://avgangstavla.vasttrafik.se/?source=vasttrafikse-stopareadetailspage&stopAreaGid=9021014005862000",
              "aspect_ratio": "300%"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Electricity price",
          "path": "electricity-price-chart",
          "type": "panel",
          "badges": [],
          "cards": [
            {
              "type": "custom:plotly-graph",
              "refresh_interval": 300,
              "hours_to_show": 84,
              "time_offset": "1.5d",
              "autorange_after_scroll": true,
              "layout": {
                "xaxis": {
                  "rangeselector": {
                    "y": 1.2,
                    "buttons": [
                      {
                        "count": 1,
                        "step": "day"
                      },
                      {
                        "count": 7,
                        "step": "day"
                      },
                      {
                        "count": 12,
                        "step": "day"
                      }
                    ]
                  }
                },
                "yaxis": {
                  "rangemode": "tozero",
                  "tickformat": ".1f"
                },
                "yaxis2": {
                  "rangemode": "tozero",
                  "tickformat": ".2f",
                  "fixrange": true
                },
                "yaxis9": {
                  "visible": false,
                  "fixedrange": true
                }
              },
              "round": 2,
              "default": null,
              "entities": [
                {
                  "entity": "sensor.total_energy_utility_meter",
                  "name": "Energy consumption",
                  "type": "bar",
                  "marker": {
                    "color": "rgba(165,165,0,0.6)"
                  },
                  "texttemplate": " %{y:.2f} kr/kWh",
                  "statistic": "state",
                  "period": "hour",
                  "filters": [
                    {
                      "fn": "(params) => {\n  const ys = [];\n  ys.push(0); \n  for (let i = 1; i < params.statistics.length; i++){\n    ys.push(Math.max(0,params.statistics[i].state-params.statistics[i-1].state));\n  }\n  return { ys };\n}"
                    }
                  ]
                },
                {
                  "entity": "sensor.electricity_price",
                  "yaxis": "y2",
                  "unit_of_measurement": "kr/kWh",
                  "line": {
                    "color": "rgba(255, 165, 0, 1)",
                    "width": 3
                  },
                  "filters": [
                    {
                      "store_var": "electricity_price"
                    },
                    {
                      "exponential_moving_average": {
                        "alpha": 1
                      }
                    }
                  ],
                  "show_value": true,
                  "texttemplate": " %{y:.2f} kr/kWh"
                },
                {
                  "entity": "sensor.electricity_price",
                  "yaxis": "y2",
                  "name": "Future price",
                  "fill": "tozeroy",
                  "fillcolor": "rgba(255, 165, 0,.1)",
                  "line": {
                    "color": "rgba(255, 165, 0, 1)",
                    "width": 1,
                    "dash": "dot"
                  },
                  "filters": [
                    {
                      "fn": "({ meta, vars }) => ({\n  xs: [vars.electricity_price.xs.slice(-1)[0],...meta.future_prices.map(({ startsAt }) => new Date(startsAt))],\n  ys: [vars.electricity_price.ys.slice(-1)[0],...meta.future_prices.map(({ total }) => total)],\n})"
                    },
                    {
                      "exponential_moving_average": {
                        "alpha": 1
                      }
                    }
                  ]
                },
                {
                  "entity": "",
                  "name": "Now",
                  "yaxis": "y9",
                  "showlegend": false,
                  "line": {
                    "width": 1,
                    "dash": "dot",
                    "color": "deepskyblue"
                  },
                  "x": "$fn () => [Date.now(), Date.now()]",
                  "y": "$fn () => [0,1]"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Power",
          "path": "power",
          "icon": "",
          "type": "panel",
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 0.1,
                  "points_per_hour": 3600,
                  "lower_bound": 0,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.total_power",
                      "decimals": 1,
                      "show_state": true,
                      "show_graph": true
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "show_state": true,
                      "show_graph": false
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 0,
                      "color": "#00ff80"
                    },
                    {
                      "value": 300,
                      "color": "gold"
                    },
                    {
                      "value": 1000,
                      "color": "#ff0000"
                    }
                  ]
                },
                {
                  "type": "custom:sankey-chart",
                  "show_names": true,
                  "wide": true,
                  "sections": [
                    {
                      "entities": [
                        {
                          "entity_id": "sensor.total_power",
                          "name": "Total",
                          "remaining": {
                            "name": "Other"
                          },
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.balcony_total_power",
                            "sensor.bathroom_total_power",
                            "sensor.bedroom_total_power",
                            "sensor.corridor_total_power",
                            "sensor.guest_bathroom_total_power",
                            "sensor.guest_room_total_power",
                            "sensor.hall_total_power",
                            "sensor.kitchen_total_power",
                            "sensor.laundry_total_power",
                            "sensor.living_room_total_power",
                            "sensor.media_centre_total_power",
                            "sensor.office_total_power"
                          ]
                        }
                      ]
                    },
                    {
                      "entities": [
                        {
                          "entity_id": "sensor.balcony_total_power",
                          "name": "Balcony",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.balcony_lamp_light_power",
                            "sensor.balcony_lamp_sockets_power",
                            "sensor.balcony_string_lights_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.bathroom_total_power",
                          "name": "Bathroom",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.bathroom_ceiling_lights_power",
                            "sensor.bathroom_mirror_light_power",
                            "sensor.bathroom_mirror_outlets_power",
                            "sensor.bathroom_towel_warmer_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.bedroom_total_power",
                          "name": "Bedroom",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.bedroom_ceiling_lights_power",
                            "sensor.bedroom_closet_lights_power",
                            "sensor.bedroom_closet_outlets_power",
                            "sensor.bedroom_outlets_carol_power",
                            "sensor.bedroom_outlets_edward_power",
                            "sensor.bedroom_tv_rack_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.corridor_total_power",
                          "name": "Corridor",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.corridor_ceiling_lights_power",
                            "sensor.corridor_outlet_1_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.guest_bathroom_total_power",
                          "name": "Guest bathroom",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.guest_bathroom_ceiling_light_power",
                            "sensor.guest_bathroom_mirror_lights_power",
                            "sensor.guest_bathroom_mirror_outlets_power",
                            "sensor.guest_bathroom_towel_warmer_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.guest_room_total_power",
                          "name": "Guest room",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.guest_room_closet_lights_power",
                            "sensor.guest_room_closet_outlets_power",
                            "sensor.guest_room_door_outlets_ceiling_lights_power",
                            "sensor.guest_room_door_outlets_outlet_power",
                            "sensor.guest_room_windows_outlets_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.hall_total_power",
                          "name": "Hall",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.hall_light_switch_light_power",
                            "sensor.hall_light_switch_panel_power",
                            "sensor.hall_outlets_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.kitchen_total_power",
                          "name": "Kitchen",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.kitchen_bench_left_light_power",
                            "sensor.kitchen_bench_outlets_1_outlets_power",
                            "sensor.kitchen_bench_outlets_1_usb_power",
                            "sensor.kitchen_bench_outlets_2_power",
                            "sensor.kitchen_bench_outlets_3_power",
                            "sensor.kitchen_bench_right_light_power",
                            "sensor.kitchen_ceiling_lights_table_lights_power",
                            "sensor.kitchen_ceiling_lights_windows_lights_power",
                            "sensor.kitchen_cooker_hood_power",
                            "sensor.kitchen_cooktop_l1_outlet_power",
                            "sensor.kitchen_cooktop_l2_outlet_power",
                            "sensor.kitchen_cooktop_l3_outlet_power",
                            "sensor.kitchen_dishwasher_outlet_power",
                            "sensor.kitchen_microwave_power",
                            "sensor.kitchen_oven_power",
                            "sensor.kitchen_refrigeration_freezer_outlet_power",
                            "sensor.kitchen_refrigeration_fridge_outlet_power",
                            "sensor.kitchen_windows_wall_outlet_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.laundry_total_power",
                          "name": "Laundry",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.laundry_bench_outlets_power",
                            "sensor.laundry_dryer_outlet_power",
                            "sensor.laundry_washing_machine_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.living_room_total_power",
                          "name": "Living room",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.living_room_lights_map_wall_power",
                            "sensor.living_room_lights_tv_wall_power",
                            "sensor.living_room_map_wall_outlets_power",
                            "sensor.living_room_tv_rack_outlets_power",
                            "sensor.living_room_windows_wall_outlets_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.media_centre_total_power",
                          "name": "Media centre",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.media_centre_switch_outlets_power",
                            "sensor.media_centre_switch_power_strip_power"
                          ]
                        },
                        {
                          "entity_id": "sensor.office_total_power",
                          "name": "Office",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red",
                          "children": [
                            "sensor.office_windows_outlets_ceiling_lights_power",
                            "sensor.office_windows_outlets_outlets_power"
                          ]
                        }
                      ]
                    },
                    {
                      "entities": [
                        {
                          "entity_id": "sensor.balcony_lamp_light_power",
                          "name": "Lamp - Light",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.balcony_lamp_sockets_power",
                          "name": "Lamp - Sockets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.balcony_string_lights_power",
                          "name": "String lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bathroom_ceiling_lights_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bathroom_mirror_light_power",
                          "name": "Mirror''s lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bathroom_mirror_outlets_power",
                          "name": "Mirror''s outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bathroom_towel_warmer_power",
                          "name": "Towel warmer",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_ceiling_lights_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_outlets_carol_power",
                          "name": "Outlets - Carol",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_outlets_edward_power",
                          "name": "Outlets - Edward",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_tv_rack_power",
                          "name": "TV rack",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_closet_lights_power",
                          "name": "Lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.bedroom_closet_outlets_power",
                          "name": "Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.corridor_ceiling_lights_power",
                          "name": "Lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.corridor_outlet_1_power",
                          "name": "Outlets 1",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_bathroom_ceiling_light_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_bathroom_mirror_lights_power",
                          "name": "Mirror''s lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_bathroom_mirror_outlets_power",
                          "name": "Mirror''s outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_bathroom_towel_warmer_power",
                          "name": "Towel warmer",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_room_closet_lights_power",
                          "name": "Closet - Lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_room_closet_outlets_power",
                          "name": "Closet - Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_room_door_outlets_ceiling_lights_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_room_door_outlets_outlet_power",
                          "name": "Door''s outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.guest_room_windows_outlets_power",
                          "name": "Windows outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.hall_light_switch_light_power",
                          "name": "Lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.hall_light_switch_panel_power",
                          "name": "Panel",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.hall_outlets_power",
                          "name": "Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_left_light_power",
                          "name": "Bench - Lights - Left",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_right_light_power",
                          "name": "Bench - Lights - Right",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_outlets_1_outlets_power",
                          "name": "Bench - Outlets 1",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_outlets_1_usb_power",
                          "name": "Bench - Outlets 1 (USB)",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_outlets_2_power",
                          "name": "Bench - Outlets 2",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_bench_outlets_3_power",
                          "name": "Bench - Outlets 3",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_ceiling_lights_table_lights_power",
                          "name": "Table''s lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_ceiling_lights_windows_lights_power",
                          "name": "Windows lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_cooker_hood_power",
                          "name": "Cooker hood",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_cooktop_l1_outlet_power",
                          "name": "Cooktop (L1)",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_cooktop_l2_outlet_power",
                          "name": "Cooktop (L2)",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_cooktop_l3_outlet_power",
                          "name": "Cooktop (L3)",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_dishwasher_outlet_power",
                          "name": "Dishwasher",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_microwave_power",
                          "name": "Microwave",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_oven_power",
                          "name": "Oven",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_refrigeration_freezer_outlet_power",
                          "name": "Freezer",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_refrigeration_fridge_outlet_power",
                          "name": "Fridge",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.kitchen_windows_wall_outlet_power",
                          "name": "Windows outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.laundry_bench_outlets_power",
                          "name": "Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.laundry_dryer_outlet_power",
                          "name": "Dryer",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.laundry_washing_machine_power",
                          "name": "Washing machine",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.living_room_lights_map_wall_power",
                          "name": "Map''s lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.living_room_lights_tv_wall_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.living_room_map_wall_outlets_power",
                          "name": "Map''s outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.living_room_tv_rack_outlets_power",
                          "name": "TV rack",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.living_room_windows_wall_outlets_power",
                          "name": "Windows outles",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.media_centre_switch_outlets_power",
                          "name": "Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.media_centre_switch_power_strip_power",
                          "name": "Outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.office_windows_outlets_ceiling_lights_power",
                          "name": "Ceiling lights",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        },
                        {
                          "entity_id": "sensor.office_windows_outlets_outlets_power",
                          "name": "Windows outlets",
                          "color_on_state": true,
                          "color_limit": 220,
                          "color_above": "red"
                        }
                      ]
                    }
                  ]
                },
                {
                  "square": false,
                  "columns": 3,
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.balcony_total_power",
                          "name": "Balcony",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.bathroom_total_power",
                          "name": "Bathroom",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.bedroom_total_power",
                          "name": "Bedroom",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.corridor_total_power",
                          "name": "Corridor",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.guest_bathroom_total_power",
                          "name": "Guest bathroom",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.guest_room_total_power",
                          "name": "Guest room",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.hall_total_power",
                          "name": "Hall",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.kitchen_total_power",
                          "name": "Kitchen",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.laundry_total_power",
                          "name": "Laundry",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.living_room_total_power",
                          "name": "Living room",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.media_centre_total_power",
                          "name": "Media centre",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "hours_to_show": 0.1,
                      "points_per_hour": 3600,
                      "decimals": 1,
                      "lower_bound": 0,
                      "font_size": 50,
                      "font_size_header": 12,
                      "group": false,
                      "animate": true,
                      "show": {
                        "legend": false,
                        "state": true,
                        "icon": false
                      },
                      "entities": [
                        {
                          "entity": "sensor.office_total_power",
                          "name": "Office",
                          "show_state": true,
                          "show_graph": true
                        }
                      ],
                      "color_thresholds": [
                        {
                          "value": 0,
                          "color": "#00ff80"
                        },
                        {
                          "value": 50,
                          "color": "gold"
                        },
                        {
                          "value": 300,
                          "color": "#ff0000"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "custom:apexcharts-card",
                  "apex_config": {
                    "chart": {
                      "height": "500px"
                    }
                  },
                  "header": {
                    "show": true,
                    "title": "Energy stats",
                    "show_states": true,
                    "colorize_states": true
                  },
                  "now": {
                    "show": true,
                    "color": "white",
                    "label": "NOW"
                  },
                  "hours_12": false,
                  "graph_span": "60h",
                  "span": {
                    "start": "day",
                    "offset": "-12h"
                  },
                  "yaxis": [
                    {
                      "id": "kWh",
                      "decimals": 0,
                      "opposite": true,
                      "min": 0,
                      "apex_config": {
                        "tickAmount": 4
                      }
                    },
                    {
                      "id": "EUR",
                      "min": 0
                    }
                  ],
                  "series": [
                    {
                      "entity": "sensor.total_power",
                      "type": "column",
                      "show": {
                        "extremas": true
                      },
                      "name": "Usage",
                      "stroke_width": 3,
                      "color": "#64511c",
                      "opacity": 0.3,
                      "yaxis_id": "kWh",
                      "group_by": {
                        "func": "avg",
                        "duration": "1h"
                      }
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "type": "line",
                      "stroke_width": 2,
                      "color": "blue",
                      "curve": "smooth",
                      "show": {
                        "legend_value": false,
                        "extremas": true,
                        "in_header": false
                      },
                      "extend_to": "now",
                      "yaxis_id": "EUR",
                      "name": "Predicted all",
                      "data_generator": "var a = entity.attributes.today.map((entry) => {\n  return [new Date(entry.startsAt), entry.total];\n}); \nvar b= entity.attributes.tomorrow.map((entry) => {\n  return [new Date(entry.startsAt), entry.total];\n});\nreturn a.concat(b);\n"
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "extend_to": "now",
                      "show": {
                        "extremas": true
                      },
                      "color": "pink",
                      "stroke_width": 5,
                      "yaxis_id": "EUR",
                      "name": "price"
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "stroke_width": 2,
                      "show": {
                        "legend_value": false,
                        "extremas": true
                      },
                      "curve": "smooth",
                      "attribute": "min_price",
                      "name": "MIN",
                      "color": "green",
                      "yaxis_id": "EUR",
                      "type": "line",
                      "group_by": {
                        "duration": "24hours",
                        "func": "min"
                      }
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "stroke_width": 2,
                      "yaxis_id": "EUR",
                      "name": "AVG",
                      "attribute": "avg_price",
                      "color": "violet",
                      "curve": "smooth",
                      "type": "line",
                      "show": {
                        "legend_value": false,
                        "extremas": true
                      },
                      "group_by": {
                        "duration": "24hours",
                        "func": "avg"
                      }
                    },
                    {
                      "entity": "sensor.electricity_price",
                      "attribute": "max_price",
                      "stroke_width": 2,
                      "curve": "smooth",
                      "show": {
                        "legend_value": false,
                        "extremas": true
                      },
                      "name": "MAX",
                      "color": "red",
                      "yaxis_id": "EUR",
                      "type": "line",
                      "group_by": {
                        "duration": "24hours",
                        "func": "max"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "title": "Rooms",
          "theme": "Backend-selected",
          "path": "rooms",
          "badges": [],
          "cards": [
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Balcony",
                  "entity": "light.balcony_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.balcony_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.balcony_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.balcony_string_lights",
                      "name": "String lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.balcony_lamp_light",
                      "name": "Lamp",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": false,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:decluttering-card",
                      "template": "template_socket",
                      "variables": [
                        {
                          "entity_id": "switch.balcony_lamp_sockets"
                        }
                      ]
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "weather.home",
                      "fill_container": true,
                      "layout": "vertical",
                      "primary_info": "state",
                      "secondary_info": "none"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ state_attr(entity, 'temperature') }}°C",
                      "secondary": "",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'temperature') | float(-99) %} {% set high_value = 22 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 19 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 15 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 6 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "weather.home",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "weather.home",
                      "primary": "{{ state_attr(entity, 'humidity') }}%",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set curr = state_attr(entity, 'humidity') | float(-99) %} {% set high_value = 90 %} {% set high_red = 0 %} {% set high_green = 0 %} {% set high_blue = 255 %} {% set mid_h_value = 60 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 40 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 30 %} {% set low_red = 255 %} {% set low_green = 0 %} {% set low_blue = 0 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.balcony_curtain",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Curtains"
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Bathroom",
                  "entity": "light.bathroom_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.bathroom_motion_dual_sensors_state",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.bathroom_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "off",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "on"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.bathroom_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bathroom_ceiling_lights",
                      "name": "Ceiling lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bathroom_mirror_light",
                      "name": "Mirror's lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": false,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Mirror's outlets",
                      "entity": "switch.bathroom_mirror_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Towel warmer",
                      "secondary": "{% if (states('sensor.bathroom_towel_warmer_power') | float(-99)) > 0 %}\n  {{ states('sensor.bathroom_towel_warmer_power') | float(-99) | round(1) }}W\n{% endif %}",
                      "icon": "{{ iif((states('sensor.bathroom_towel_warmer_power') | float(-99)) > 5, 'mdi:radiator', 'mdi:radiator-disabled') }}",
                      "entity": "binary_sensor.bathroom_towel_warmer_status",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "icon_color": "{{ iif((states('sensor.bathroom_towel_warmer_power') | float(-99)) > 5, 'red', '') }}",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.bathroom_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.bathroom_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.bathroom_thermostat_humidity",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set humidity = states(entity) | float(-99) %} {% if humidity > 43 %}\n  blue\n{% elif humidity > 37 %}\n  green\n{% else %}\n  red\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Bedroom",
                  "entity": "light.bedroom_beds_lights",
                  "info_entities": [
                    {
                      "entity": "sensor.bedroom_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "media_player.bedroom_tv_samsung_universal",
                      "state": "on"
                    },
                    {
                      "entity": "switch.bedroom_power_strip_1_socket_4",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "custom:mushroom-media-player-card",
                    "layout": "vertical",
                    "entity": "media_player.bedroom_tv_samsung_universal",
                    "name": "TV Samsung",
                    "icon": "mdi:television",
                    "fill_container": true,
                    "show_volume_level": false,
                    "use_media_info": false,
                    "volume_controls": [
                      "volume_set"
                    ],
                    "collapsible_controls": true,
                    "media_controls": [],
                    "secondary_info": "none",
                    "tap_action": {
                      "action": "call-service",
                      "service": "switch.toggle",
                      "data": {},
                      "target": {
                        "entity_id": "switch.bedroom_power_strip_1_socket_4"
                      }
                    }
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "media_player.bedroom_tv_samsung_universal",
                          "state_not": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-template-card",
                        "primary": "TV Samsung",
                        "secondary": "",
                        "icon": "mdi:television",
                        "fill_container": true,
                        "layout": "vertical",
                        "entity": "media_player.bedroom_tv_samsung_universal",
                        "icon_color": "{{ iif(is_state(entity, 'on'), 'green', iif(is_state('switch.bedroom_power_strip_1_socket_4', 'on'), 'red', '')) }}",
                        "tap_action": {
                          "action": "call-service",
                          "service": "switch.toggle",
                          "data": {},
                          "target": {
                            "entity_id": "switch.bedroom_power_strip_1_socket_4"
                          }
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bedroom_carol_light",
                      "name": "Carol's lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bedroom_edward_light",
                      "name": "Edward's lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Carol's outlets",
                      "entity": "switch.bedroom_outlets_carol",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Edward's outlets",
                      "entity": "switch.bedroom_outlets_edward",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "TV rack outlets",
                      "entity": "switch.bedroom_tv_rack",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.bedroom_curtains_dual",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Covers"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.bedroom_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.bedroom_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set humidity = states(entity) | float(-99) %} {% if humidity > 43 %}\n  blue\n{% elif humidity > 37 %}\n  green\n{% else %}\n  red\n{% endif %}",
                      "entity": "sensor.bedroom_thermostat_humidity",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bedroom_closet_lights",
                      "name": "Closet - Lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "switch.bedroom_closet_outlets",
                      "primary": "Closet - Outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": true
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Guest room",
                  "entity": "light.guest_room_wall_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.guest_room_motion",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.guest_room_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "off",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "on"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.guest_room_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.guest_room_wall_lights",
                      "name": "Mountains lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": true,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Door's outlets",
                      "entity": "switch.guest_room_door_outlets_outlet",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Windows outlets",
                      "entity": "switch.guest_room_windows_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.guest_room_shutter_cover",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Shutter"
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.guest_room_roller_blind_cover",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Roller blind"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.guest_room_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.guest_room_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set humidity = states(entity) | float(-99) %} {% if humidity > 43 %}\n  blue\n{% elif humidity > 37 %}\n  green\n{% else %}\n  red\n{% endif %}",
                      "entity": "sensor.guest_room_thermostat_humidity",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.guest_room_closet_lights",
                      "name": "Closet - Lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "switch.guest_room_closet_outlets",
                      "primary": "Closet - Outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": true
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Guest bathroom",
                  "entity": "light.guest_bathroom_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.guest_bathroom_motion_occupancy",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.guest_bathroom_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.guest_bathroom_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.guest_bathroom_ceiling_light",
                      "name": "Ceiling lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.guest_bathroom_mirror_lights",
                      "name": "Mirror's lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": false,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Mirror's outlets",
                      "entity": "switch.guest_bathroom_mirror_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Towel warmer",
                      "secondary": "{% if (states('sensor.guest_bathroom_towel_warmer_power') | float(-99)) > 0 %}\n  {{ states('sensor.guest_bathroom_towel_warmer_power') | float(-99) | round(1) }}W\n{% endif %}",
                      "icon": "{{ iif((states('sensor.guest_bathroom_towel_warmer_power') | float(-99)) >5 , 'mdi:radiator', 'mdi:radiator-disabled') }}",
                      "entity": "switch.guest_bathroom_towel_warmer",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "icon_color": "{{ iif((states('sensor.guest_bathroom_towel_warmer_power') | float(-99)) >5 , 'red', '') }}",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Hall",
                  "entity": "light.hall_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.hall_front_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.hall_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.hall_ceiling_light",
                      "name": "Lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "switch.hall_outlets",
                      "primary": "Outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": true
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Kitchen",
                  "entity": "light.kitchen_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.kitchen_motion_all",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.kitchen_windows",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:window-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.kitchen_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.kitchen_bench_lights",
                      "name": "Bench lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.kitchen_table_lights",
                      "name": "Table lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Dishwasher outlets",
                      "entity": "switch.kitchen_dishwasher_outlet",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.kitchen_dishwasher_operation_state",
                      "primary": "Dishwasher",
                      "secondary": "{{ states(entity) }}\n{% if is_state(entity, 'Run') %} {{ states('sensor.kitchen_dishwasher_outlet_power') }}W\n{% endif %}",
                      "icon": "mdi:dishwasher",
                      "icon_color": "{% if is_state('switch.kitchen_dishwasher_outlet', 'off') %}\n  off\n{% else %}\n  {% if is_state(entity, 'Finished') %}\n    blue\n  {% elif states(entity) in ['Idle', 'Innactive'] %}\n    green\n  {% elif is_state(entity, 'Run') %}\n    red\n  {% else %}\n    yellow\n  {% endif %}\n{% endif %}",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.kitchen_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.kitchen_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.kitchen_thermostat_humidity",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set curr = states(entity) | float(-99) %} {% set high_value = 43 %} {% set high_red = 0 %} {% set high_green = 0 %} {% set high_blue = 255 %} {% set mid_value = 40 %} {% set mid_red = 0 %} {% set mid_green = 255 %} {% set mid_blue = 0 %} {% set low_value = 37 %} {% set low_red = 255 %} {% set low_green = 0 %} {% set low_blue = 0 %} {% if curr > mid_value %}\n  {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n  {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n  {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n  {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n{% else %}\n  {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n  {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n  {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n  {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.kitchen_freezer_hygrometer_temperature",
                      "primary": "Freezer",
                      "secondary": "{{ iif(is_state('switch.kitchen_refrigeration_freezer_outlet', 'on'), '', states('switch.kitchen_refrigeration_freezer_outlet') | capitalize) }} {% if is_number(states(entity)) %}\n  {{ states(entity) | float(-99) | round(1) }}°C\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %} {{states('sensor.kitchen_refrigeration_freezer_outlet_power') }}W",
                      "icon": "mdi:fridge",
                      "icon_color": "{% if is_state('switch.kitchen_refrigeration_freezer_outlet', 'on') %}\n  {% if is_number(states(entity)) %}\n    {% set curr = states(entity) | float(-99) %}\n    {% set high_value = -14 %}\n    {% set high_red = 255 %}\n    {% set high_green = 0 %}\n    {% set high_blue = 0 %}\n    {% set mid_value = -16 %}\n    {% set mid_red = 0 %}\n    {% set mid_green = 255 %}\n    {% set mid_blue = 0 %}\n    {% set low_value = -18 %}\n    {% set low_red = 0 %}\n    {% set low_green = 0 %}\n    {% set low_blue = 255 %}\n    {% if curr > mid_value %}\n      {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n      {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n      {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n      {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n    {% else %}\n      {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n      {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n      {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n      {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n    {% endif %}\n    {% set red = min(255, max(0, red | round(0) )) %}\n    {% set green = min(255, max(0, green | round(0) )) %}\n    {% set blue = min(255, max(0, blue | round(0) )) %}\n    {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n  {% endif %}\n{% else %}\n  red\n{% endif %}",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.kitchen_fridge_hygrometer_temperature",
                      "primary": "Refrigerator",
                      "secondary": "{{ iif(is_state('switch.kitchen_refrigeration_fridge_outlet', 'on'), '', states('switch.kitchen_refrigeration_fridge_outlet') | capitalize) }} {% if is_number(states(entity)) %}\n  {{ states(entity) | float(-99) | round(1) }}°C\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %} {{states('sensor.kitchen_refrigeration_fridge_outlet_power') }}W",
                      "icon": "mdi:fridge",
                      "icon_color": "{% if is_state('switch.kitchen_refrigeration_fridge_outlet', 'on') %}\n  {% if is_number(states(entity)) %}\n    {% set curr = states(entity) | float(-99) %}\n    {% set high_value = 8 %}\n    {% set high_red = 255 %}\n    {% set high_green = 0 %}\n    {% set high_blue = 0 %}\n    {% set mid_value = 5 %}\n    {% set mid_red = 0 %}\n    {% set mid_green = 255 %}\n    {% set mid_blue = 0 %}\n    {% set low_value = 3 %}\n    {% set low_red = 0 %}\n    {% set low_green = 0 %}\n    {% set low_blue = 255 %}\n    {% if curr > mid_value %}\n      {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n      {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n      {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n      {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n    {% else %}\n      {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n      {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n      {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n      {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n    {% endif %}\n    {% set red = min(255, max(0, red | round(0) )) %}\n    {% set green = min(255, max(0, green | round(0) )) %}\n    {% set blue = min(255, max(0, blue | round(0) )) %}\n    {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n  {% endif %}\n{% else %}\n  red\n{% endif %}",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Microwave",
                      "entity": "sensor.kitchen_microwave_power",
                      "icon": "mdi:microwave",
                      "secondary": "{% if is_state((entity | replace('sensor.', 'switch.') | replace('_power','')), 'on') %}\n  {{ states(entity) | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity | replace('sensor.', 'switch.') | replace('_power','')) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity | replace('sensor.', 'switch.') | replace('_power',''), 'on') %}\n  {% set curr = states(entity) | float(-99) %}\n  {% set high_value = 2000 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 10 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 0 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Oven",
                      "entity": "sensor.kitchen_oven_power",
                      "icon": "mdi:toaster-oven",
                      "secondary": "{% if is_state((entity | replace('sensor.', 'switch.') | replace('_power','')), 'on') %}\n  {{ states(entity) | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity | replace('sensor.', 'switch.') | replace('_power','')) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity | replace('sensor.', 'switch.') | replace('_power',''), 'on') %}\n  {% set curr = states(entity) | float(-99) %}\n  {% set high_value = 2000 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 10 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 0 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Cook hood",
                      "entity": "sensor.kitchen_cooker_hood_power",
                      "icon": "mdi:fan",
                      "secondary": "{% if is_state((entity | replace('sensor.', 'switch.') | replace('_power','')), 'on') %}\n  {{ states(entity) | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity | replace('sensor.', 'switch.') | replace('_power','')) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity | replace('sensor.', 'switch.') | replace('_power',''), 'on') %}\n  {% set curr = states(entity) | float(-99) %}\n  {% set high_value = 200 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 10 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 0 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Cooktop",
                      "entity": "sensor.kitchen_cooktop_total_power",
                      "icon": "mdi:stove",
                      "secondary": "{% if is_state((entity | replace('sensor.', 'switch.') | replace('_power','')), 'on') %}\n  {{ states(entity) | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity | replace('sensor.', 'switch.') | replace('_power','')) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity | replace('sensor.', 'switch.') | replace('_power',''), 'on') %}\n  {% set curr = states(entity) | float(-99) %}\n  {% set high_value = 2000 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 1000 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 0 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Bench outlets 1",
                      "entity": "switch.kitchen_bench_outlets_1_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Bench outlets 2",
                      "entity": "switch.kitchen_bench_outlets_2",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Bench outlets 3",
                      "entity": "switch.kitchen_bench_outlets_3",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Bench USB",
                      "entity": "switch.kitchen_bench_outlets_1_usb",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 2.5 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 1.5 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 0.5 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:usb",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a USB power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Laundry",
                  "entity": "light.bathroom_ceiling_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.bathroom_motion_dual_sensors_state",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.bathroom_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "off",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "on"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.laundry_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.bathroom_ceiling_lights",
                      "name": "Lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Outlets",
                      "entity": "switch.laundry_bench_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Washing machine",
                      "secondary": "{{ states('sensor.laundry_washing_machine_status') | capitalize }}\n{% if states('sensor.laundry_washing_machine_power') | float(0) > 0 %} {{ states('sensor.laundry_washing_machine_power') | float(0) | round(1) }}W\n{% endif %}",
                      "icon": "mdi:washing-machine",
                      "icon_color": "{% if is_state('switch.laundry_washing_machine_outlet', 'off') %}\n  off\n{% else %}\n  {% if is_state('sensor.laundry_washing_machine_status', 'Idle') %}\n    blue\n  {% else %}\n    red\n  {% endif %}\n{% endif %}",
                      "entity": "sensor.laundry_washing_machine_status",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": {
                          "text": "Are you sure you want to toggle the appliance's power supply? Please make sure the appliance is not running."
                        },
                        "action": "call-service",
                        "service": "switch.toggle",
                        "target": {
                          "entity_id": "switch.laundry_washing_machine_outlet"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Dryer",
                      "secondary": "{{ states('sensor.laundry_dryer_status') | capitalize }}\n{% if states('sensor.laundry_dryer_outlet_power') | float(0) > 0%} {{\n  states('sensor.laundry_dryer_outlet_power') | float(0) | round(1) }}W\n{% endif %}",
                      "icon": "mdi:tumble-dryer",
                      "icon_color": "{% if is_state('switch.laundry_dryer_outlet', 'off') %}\n  off\n{% else %}\n  {% if is_state('sensor.laundry_dryer_status', 'Idle') %}\n    blue\n  {% else %}\n    red\n  {% endif %}\n{% endif %}",
                      "entity": "sensor.laundry_dryer_status",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": {
                          "text": "Are you sure you want to toggle the appliance's power supply? Please make sure the appliance is not running."
                        },
                        "action": "call-service",
                        "service": "switch.toggle",
                        "target": {
                          "entity_id": "switch.laundry_dryer_outlet"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.bathroom_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.bathroom_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set humidity = states(entity) | float(-99) %} {% if humidity > 43 %}\n  blue\n{% elif humidity > 37 %}\n  green\n{% else %}\n  red\n{% endif %}",
                      "entity": "sensor.bathroom_thermostat_humidity",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Living room",
                  "entity": "light.living_room_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.living_room_windows_left",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:window-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.living_room_windows_right",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:window-open",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.living_room_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "media_player.living_room_tv_sony_dlna",
                      "state_not": "off"
                    },
                    {
                      "entity": "media_player.living_room_tv_sony_dlna",
                      "state_not": "unavailable"
                    }
                  ],
                  "card": {
                    "type": "custom:mushroom-media-player-card",
                    "layout": "vertical",
                    "entity": "media_player.living_room_tv_sony_dlna",
                    "name": "TV Sony",
                    "icon": "mdi:television",
                    "fill_container": true,
                    "show_volume_level": false,
                    "use_media_info": false,
                    "collapsible_controls": true,
                    "media_controls": [],
                    "secondary_info": "none",
                    "tap_action": {
                      "action": "call-service",
                      "service": "input_button.press",
                      "data": {},
                      "target": {
                        "entity_id": "input_button.living_room_tv_sony_toggle"
                      }
                    }
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "media_player.living_room_tv_sony_dlna",
                      "state_not": "off"
                    },
                    {
                      "entity": "media_player.living_room_tv_sony_dlna",
                      "state_not": "unavailable"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-media-player",
                    "entity": "media_player.living_room_tv_sony_dlna",
                    "sound_mode": "icon",
                    "toggle_power": false,
                    "volume_step": "1",
                    "min_volume": "0",
                    "info": "scroll",
                    "max_volume": "50",
                    "hide": {
                      "power": true,
                      "name": true,
                      "icon": true,
                      "play_pause": true,
                      "volume_level": false
                    }
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "media_player.living_room_tv_sony_dlna",
                          "state": "off"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-media-player-card",
                        "layout": "vertical",
                        "entity": "media_player.living_room_tv_sony_dlna",
                        "name": "TV Sony",
                        "icon": "mdi:television",
                        "fill_container": true,
                        "show_volume_level": false,
                        "use_media_info": false,
                        "volume_controls": [
                          "volume_set"
                        ],
                        "collapsible_controls": true,
                        "media_controls": [],
                        "secondary_info": "none",
                        "tap_action": {
                          "action": "call-service",
                          "service": "input_button.press"
                        },
                        "data": {},
                        "target": {
                          "entity_id": "input_button.living_room_tv_sony_toggle"
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "media_player.living_room_tv_sony_dlna",
                          "state": "unavailable"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-media-player-card",
                        "layout": "vertical",
                        "entity": "media_player.living_room_tv_sony_dlna",
                        "name": "TV Sony",
                        "icon": "mdi:television",
                        "fill_container": true,
                        "show_volume_level": false,
                        "use_media_info": false,
                        "volume_controls": [
                          "volume_set"
                        ],
                        "collapsible_controls": true,
                        "media_controls": [],
                        "secondary_info": "none",
                        "tap_action": {
                          "action": "call-service",
                          "service": "input_button.press"
                        },
                        "data": {},
                        "target": {
                          "entity_id": "input_button.living_room_tv_sony_toggle"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "TV rack",
                      "entity": "switch.living_room_tv_rack_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Map wall",
                      "entity": "switch.living_room_map_wall_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Windows wall",
                      "entity": "switch.living_room_windows_wall_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-vacuum-card",
                      "entity": "vacuum.hall_roomba",
                      "name": "Roomba",
                      "fill_container": true,
                      "layout": "vertical",
                      "commands": []
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.living_room_blinds",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Covers"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.living_room_thermostat",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.living_room_thermostat"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set humidity = states(entity) | float(-99) %} {% if humidity > 43 %}\n  blue\n{% elif humidity > 37 %}\n  green\n{% else %}\n  red\n{% endif %}",
                      "entity": "sensor.living_room_thermostat_humidity",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Camera",
                      "secondary": "{{ states('camera.living_room_camera') | capitalize }}",
                      "icon": "{{ iif(is_state(entity, 'True'), 'mdi:cctv', 'mdi:cctv-off') }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "binary_sensor.living_room_camera_streaming_sensor",
                      "icon_color": "{{ iif(is_state(entity, 'True'), 'red', iif(is_state('switch.living_room_camera_enabled', 'on'), 'gold', '')) }}",
                      "badge_icon": "{{ iif(is_state(entity, 'True'), 'mdi:wifi', '') }}",
                      "badge_color": "red",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.camera_toggle",
                        "data": {
                          "camera": "camera.living_room_camera"
                        },
                        "target": {}
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "custom:room-card",
                  "title": "Office",
                  "entity": "light.office_all_lights",
                  "info_entities": [
                    {
                      "entity": "binary_sensor.office_motion_occupancy",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:motion-sensor",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "on",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "off"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "binary_sensor.office_door",
                      "show_icon": true,
                      "icon": {
                        "conditions": [
                          {
                            "icon": "mdi:door",
                            "condition": "equals",
                            "attribute": "state",
                            "value": "off",
                            "styles": {
                              "color": "red"
                            }
                          }
                        ]
                      },
                      "hide_if": {
                        "conditions": [
                          {
                            "condition": "equals",
                            "value": "on"
                          }
                        ]
                      }
                    },
                    {
                      "entity": "sensor.office_total_power"
                    }
                  ],
                  "show_icon": true,
                  "tap_action": {
                    "action": "toggle"
                  },
                  "double_tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "grid",
                  "square": false,
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.office_ceiling_lines",
                      "name": "Ceiling Lines",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": true,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Door's outlets",
                      "entity": "switch.office_door_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Windows outlets",
                      "entity": "switch.office_windows_outlets_outlets",
                      "secondary": "{% if is_state(entity, 'on') %}\n  {{ states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) | round(1) }}W\n{% else %}\n  {{ states(entity) | capitalize }}\n{% endif %}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  {% set curr = states(entity | replace('switch.', 'sensor.') + '_power') | float(-99) %}\n  {% set high_value = 100 %}\n  {% set high_red = 255 %}\n  {% set high_green = 0 %}\n  {% set high_blue = 0 %}\n  {% set mid_value = 25 %}\n  {% set mid_red = 255 %}\n  {% set mid_green = 215 %}\n  {% set mid_blue = 0 %}\n  {% set low_value = 10 %}\n  {% set low_red = 0 %}\n  {% set low_green = 255 %}\n  {% set low_blue = 0 %}\n  {% if curr > mid_value %}\n    {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n    {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n    {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n    {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n  {% else %}\n    {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n    {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n    {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n    {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n  {% endif %}\n  {% set red = min(255, max(0, red | round(0) )) %}\n  {% set green = min(255, max(0, green | round(0) )) %}\n  {% set blue = min(255, max(0, blue | round(0) )) %}\n  {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}\n{% endif %}",
                      "icon": "mdi:power-socket-de",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle a wall power socket?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.office_workstation_lights",
                      "name": "Workstation",
                      "use_light_color": true,
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Displays",
                      "entity": "switch.office_workstation_outlets_displays",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  blue\n{% endif %}",
                      "icon": "mdi:monitor-multiple",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Docking station",
                      "entity": "switch.office_workstation_outlets_docking_station",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  blue\n{% endif %}",
                      "icon": "mdi:laptop",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "USB",
                      "entity": "switch.office_workstation_power_strip_usb",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:usb",
                      "icon_color": "{% if is_state(entity, 'on') %}\n  blue\n{% endif %}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.office_shutter_2_cover",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Shutter (School)"
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.office_shutter_1_cover",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Shutter (Street)"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "climate.office_thermostat_1",
                      "primary": "{{ state_attr(entity, 'current_temperature') | float(-99) | round(1) }}°C",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'current_temperature') | float(-99) %} {% set high_value = 24 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 22 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 19 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 17 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "multiline_secondary": true,
                      "tap_action": {
                        "confirmation": true,
                        "action": "call-service",
                        "service": "script.climate_toggle",
                        "data": {
                          "climate": "climate.office_thermostat_1"
                        }
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "sensor.office_thermostat_1_current_humidity",
                      "primary": "{{ states(entity) | float(-99) | round(1) }} %",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set curr = states(entity) | float(-99) %} {% set high_value = 43 %} {% set high_red = 0 %} {% set high_green = 0 %} {% set high_blue = 255 %} {% set mid_value = 40 %} {% set mid_red = 0 %} {% set mid_green = 255 %} {% set mid_blue = 0 %} {% set low_value = 37 %} {% set low_red = 255 %} {% set low_green = 0 %} {% set low_blue = 0 %} {% if curr > mid_value %}\n  {% set curr_point = (curr - mid_value) / (high_value - mid_value) %}\n  {% set red = (curr_point * (high_red - mid_red) + mid_red) %}\n  {% set green = (curr_point * (high_green - mid_green) + mid_green) %}\n  {% set blue = (curr_point * (high_blue - mid_blue) + mid_blue) %}\n{% else %}\n  {% set curr_point = (mid_value - curr) / (mid_value - low_value) %}\n  {% set red = mid_red - (curr_point * (mid_red - low_red)) %}\n  {% set green = mid_green - (curr_point * (mid_green - low_green)) %}\n  {% set blue = mid_blue - (curr_point * (mid_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Camera",
                      "secondary": "{{ states('camera.office_camera') | capitalize }}",
                      "icon": "{{ iif(is_state(entity, 'True'), 'mdi:cctv', 'mdi:cctv-off') }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "binary_sensor.office_camera_streaming_sensor",
                      "icon_color": "{{ iif(is_state(entity, 'True'), 'red', iif(is_state('switch.office_camera_enabled', 'on'), 'gold', '')) }}",
                      "badge_icon": "{{ iif(is_state(entity, 'True'), 'mdi:wifi', '') }}",
                      "badge_color": "red",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.camera_toggle",
                        "data": {
                          "camera": "camera.office_camera"
                        },
                        "target": {}
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Camera (Dog's mat)",
                      "secondary": "{{ states('camera.dogs_mat_camera') | capitalize }}",
                      "icon": "{{ iif(is_state(entity, 'True'), 'mdi:cctv', 'mdi:cctv-off') }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "binary_sensor.dogs_mat_camera_streaming_sensor",
                      "icon_color": "{{ iif(is_state(entity, 'True'), 'red', iif(is_state('switch.dogs_mat_camera_enabled', 'on'), 'gold', '')) }}",
                      "badge_icon": "{{ iif(is_state(entity, 'True'), 'mdi:wifi', '') }}",
                      "badge_color": "red",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.camera_toggle",
                        "data": {
                          "camera": "camera.dogs_mat_camera_camera"
                        },
                        "target": {}
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Printer",
                      "secondary": "{{ states(entity) | capitalize }}",
                      "icon": "{{iif(is_state(entity, 'off'), 'mdi:printer-off', 'mdi:printer') }}",
                      "icon_color": "{% if states(entity) not in ['unavailable','unknown','none']) %}\n  {% if ((states('sensor.epson_wf_3720_series_black_ink') | float(0) | round(0)) < 10) or ((states('sensor.epson_wf_3720_series_cyan_ink') | float(0) | round(0)) < 10) or ((states('sensor.epson_wf_3720_series_magenta_ink') | float(0) | round(0)) < 10) or ((states('sensor.epson_wf_3720_series_yellow_ink') | float(0) | round(0)) < 10) %}\n    red\n  {% elif is_state(entity, 'idle') %}\n    blue\n  {% else %}\n    gold\n  {% endif %}\n{% endif %}",
                      "entity": "sensor.epson_wf_3720_series",
                      "fill_container": true,
                      "layout": "vertical",
                      "multiline_secondary": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.epson_wf_3720_series",
                      "state_not": "unavailable"
                    }
                  ],
                  "card": {
                    "type": "custom:apexcharts-card",
                    "chart_type": "radialBar",
                    "header": {
                      "show": true,
                      "show_states": true,
                      "colorize_states": true,
                      "title": "Epson printer"
                    },
                    "series": [
                      {
                        "entity": "sensor.epson_wf_3720_series_black_ink",
                        "name": "Black",
                        "color": "black"
                      },
                      {
                        "entity": "sensor.epson_wf_3720_series_cyan_ink",
                        "name": "Cyan",
                        "color": "cyan"
                      },
                      {
                        "entity": "sensor.epson_wf_3720_series_magenta_ink",
                        "name": "Magenta",
                        "color": "magenta"
                      },
                      {
                        "entity": "sensor.epson_wf_3720_series_yellow_ink",
                        "name": "Yellow",
                        "color": "yellow"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "System monitoring",
          "path": "system-monitoring",
          "badges": [],
          "cards": [
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "entities",
                  "title": "Home Assistant (DEV)",
                  "icon": "mdi:home-assistant",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Host",
                      "align": "left"
                    }
                  ],
                  "show_header_toggle": true
                },
                {
                  "type": "custom:plotly-graph",
                  "hours_to_show": 2,
                  "autorange_after_scroll": true,
                  "time_offset": "15m",
                  "layout": {
                    "height": 600,
                    "xaxis": {
                      "rangeselector": {
                        "y": 1.15,
                        "buttons": [
                          {
                            "count": 15,
                            "step": "minute"
                          },
                          {
                            "count": 1,
                            "step": "hour"
                          },
                          {
                            "count": 12,
                            "step": "hour"
                          },
                          {
                            "count": 1,
                            "step": "day"
                          },
                          {
                            "count": 7,
                            "step": "day"
                          },
                          {
                            "count": 15,
                            "step": "day"
                          },
                          {
                            "count": 60,
                            "step": "day"
                          }
                        ]
                      }
                    },
                    "yaxis": {
                      "rangemode": "tozero",
                      "tickformat": ".1f",
                      "fixrange": true
                    },
                    "yaxis2": {
                      "rangemode": "tozero",
                      "tickformat": ".1f",
                      "fixrange": true
                    }
                  },
                  "round": 1,
                  "default": null,
                  "entities": [
                    {
                      "entity": "sensor.processor_use",
                      "name": "CPU (%)",
                      "unit_of_measurement": "%",
                      "line": {
                        "width": 3
                      },
                      "show_value": true,
                      "texttemplate": " %{y:.1f} %"
                    },
                    {
                      "entity": "sensor.memory_use_percent",
                      "name": "RAM (%)",
                      "unit_of_measurement": "%",
                      "line": {
                        "width": 3
                      },
                      "show_value": true,
                      "texttemplate": " %{y:.1f} %"
                    },
                    {
                      "entity": "sensor.disk_use_percent",
                      "name": "SSD (%)",
                      "unit_of_measurement": "%",
                      "line": {
                        "width": 3
                      },
                      "show_value": true,
                      "texttemplate": " %{y:.1f} %"
                    },
                    {
                      "entity": "sensor.processor_temperature",
                      "name": "CPU (°C)",
                      "yaxis": "y2",
                      "unit_of_measurement": "°C",
                      "line": {
                        "width": 3
                      },
                      "show_value": true,
                      "texttemplate": " %{y:.1f} °C"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Network interface",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Throughput",
                  "decimals": 2,
                  "entities": [
                    {
                      "entity": "sensor.network_throughput_in_eno1",
                      "name": "In",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.network_throughput_out_eno1",
                      "name": "Out",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 3,
                  "line_width": 3,
                  "points_per_hour": 30,
                  "update_interval": 300
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.ipv4_address_eno1",
                      "name": "Internal IP",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "fill_container": true,
                      "icon": "mdi:ip-network"
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.network_in_eno1",
                          "name": "Network In",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.network_out_eno1",
                          "name": "Network Out",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.packets_in_eno1",
                          "name": "Packets In",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.packets_out_eno1",
                          "name": "Packets Out",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Statistics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:fold-entity-row",
                      "padding": 0,
                      "head": {
                        "entity": "sensor.home_assistant_entities_count",
                        "name": "Home Assistant Entities",
                        "icon": "mdi:devices",
                        "tap_action": {
                          "action": "none"
                        }
                      },
                      "entities": [
                        {
                          "type": "custom:flex-table-card",
                          "entities": {
                            "include": "sensor.home_assistant_entities_count"
                          },
                          "columns": [
                            {
                              "data": "domain_list",
                              "name": "Domain",
                              "modify": "x.replace(/\\w\\S*/g,(x.charAt(0).toUpperCase() + x.substr(1).toLowerCase()).replaceAll(\"_\", \" \"))"
                            },
                            {
                              "data": "count_list",
                              "name": "Entities",
                              "align": "right"
                            },
                            {
                              "data": "unavailable_count_list",
                              "name": "Unavailable",
                              "align": "right"
                            }
                          ],
                          "sort_by": [
                            "domain_list+",
                            "count_list-"
                          ],
                          "clickable": true,
                          "card_mod": {
                            "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Watchman report",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:fold-entity-row",
                      "padding": 0,
                      "head": {
                        "entity": "sensor.watchman_missing_entities",
                        "name": "Watchman Missing Entities",
                        "icon": "mdi:shield-half-full",
                        "tap_action": {
                          "action": "none"
                        }
                      },
                      "entities": [
                        {
                          "type": "custom:flex-table-card",
                          "entities": {
                            "include": "sensor.watchman_missing_entities"
                          },
                          "columns": [
                            {
                              "data": "entities",
                              "name": "Watchman report",
                              "modify": "x.id + \" is \" + x.state.replace(\"unavail\",\"unavailable\") + \" (\" + x.occurrences + \")\""
                            }
                          ],
                          "clickable": false,
                          "card_mod": {
                            "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "entities",
                  "title": "Home Assistant",
                  "icon": "mdi:home-assistant",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Host",
                      "align": "left"
                    }
                  ],
                  "show_header_toggle": true
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "CPU",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.processor_use",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.memory_use_percent",
                      "name": "RAM",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.processor_temperature",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "custom:apexcharts-card",
                  "chart_type": "radialBar",
                  "header": {
                    "show": true,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "series": [
                    {
                      "entity": "sensor.disk_use_percent",
                      "name": "SDD usage"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Network interface",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Throughput",
                  "decimals": 2,
                  "entities": [
                    {
                      "entity": "sensor.network_throughput_in_eno1",
                      "name": "In",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.network_throughput_out_eno1",
                      "name": "Out",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 3,
                  "line_width": 3,
                  "points_per_hour": 30,
                  "update_interval": 300
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.ipv4_address_eno1",
                      "name": "Internal IP",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "fill_container": true,
                      "icon": "mdi:ip-network"
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.network_in_eno1",
                          "name": "Network In",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.network_out_eno1",
                          "name": "Network Out",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.packets_in_eno1",
                          "name": "Packets In",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.packets_out_eno1",
                          "name": "Packets Out",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Statistics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:fold-entity-row",
                      "padding": 0,
                      "head": {
                        "entity": "sensor.home_assistant_entities_count",
                        "name": "Home Assistant Entities",
                        "icon": "mdi:devices",
                        "tap_action": {
                          "action": "none"
                        }
                      },
                      "entities": [
                        {
                          "type": "custom:flex-table-card",
                          "entities": {
                            "include": "sensor.home_assistant_entities_count"
                          },
                          "columns": [
                            {
                              "data": "domain_list",
                              "name": "Domain",
                              "modify": "x.replace(/\\w\\S*/g,(x.charAt(0).toUpperCase() + x.substr(1).toLowerCase()).replaceAll(\"_\", \" \"))"
                            },
                            {
                              "data": "count_list",
                              "name": "Entities",
                              "align": "right"
                            },
                            {
                              "data": "unavailable_count_list",
                              "name": "Unavailable",
                              "align": "right"
                            }
                          ],
                          "sort_by": [
                            "domain_list+",
                            "count_list-"
                          ],
                          "clickable": true,
                          "card_mod": {
                            "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Watchman report",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:fold-entity-row",
                      "padding": 0,
                      "head": {
                        "entity": "sensor.watchman_missing_entities",
                        "name": "Watchman Missing Entities",
                        "icon": "mdi:shield-half-full",
                        "tap_action": {
                          "action": "none"
                        }
                      },
                      "entities": [
                        {
                          "type": "custom:flex-table-card",
                          "entities": {
                            "include": "sensor.watchman_missing_entities"
                          },
                          "columns": [
                            {
                              "data": "entities",
                              "name": "Watchman report",
                              "modify": "x.id + \" is \" + x.state.replace(\"unavail\",\"unavailable\") + \" (\" + x.occurrences + \")\""
                            }
                          ],
                          "clickable": false,
                          "card_mod": {
                            "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "entities",
                  "title": "AiMesh router",
                  "icon": "mdi:earth",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "CPU",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.aimesh_router_cpu",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.aimesh_router_ram",
                      "name": "RAM",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Temperature",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.aimesh_router_cpu_temperature",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Internet",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "WAN",
                  "decimals": 2,
                  "entities": [
                    {
                      "entity": "sensor.aimesh_router_wan_download_speed",
                      "name": "Download",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.aimesh_router_wan_upload_speed",
                      "name": "Upload",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 3,
                  "line_width": 3,
                  "points_per_hour": 30,
                  "update_interval": 300
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_router_wan_ip",
                      "name": "WAN IP",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "fill_container": true
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.aimesh_router_wan_upload_speed",
                          "name": "Upload",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.aimesh_router_wan_download_speed",
                          "name": "Download",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.aimesh_router_wan_upload",
                          "name": "Upload",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon": "",
                          "fill_container": false,
                          "icon_type": "none"
                        },
                        {
                          "type": "custom:mushroom-entity-card",
                          "entity": "sensor.aimesh_router_wan_download",
                          "name": "Download",
                          "primary_info": "state",
                          "secondary_info": "name",
                          "layout": "horizontal",
                          "icon_type": "none"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_router_connected_devices",
                      "name": "Devices",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "icon_color": "disabled"
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_router_boot_time",
                      "name": "Boot time",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "icon_color": "disabled"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{states(entity) | float(-99) | round(1)}} {{state_attr(entity, 'unit_of_measurement')}}",
                      "secondary": "CPU",
                      "icon": "mdi:thermometer",
                      "entity": "sensor.aimesh_router_cpu_temperature",
                      "layout": "vertical",
                      "fill_container": true
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:fold-entity-row",
                      "padding": 0,
                      "head": {
                        "entity": "sensor.aimesh_router_connected_devices",
                        "name": "Connected devices",
                        "icon": "mdi:router-wireless",
                        "tap_action": {
                          "action": "none"
                        }
                      },
                      "entities": [
                        {
                          "type": "custom:flex-table-card",
                          "sort_by": [
                            "devices+"
                          ],
                          "entities": {
                            "include": "sensor.aimesh_router_connected_devices"
                          },
                          "columns": [
                            {
                              "data": "devices",
                              "name": "IP Address (hidden)",
                              "modify": "x.ip",
                              "hidden": true
                            },
                            {
                              "data": "devices",
                              "name": "Device Name",
                              "modify": "x.name"
                            },
                            {
                              "data": "devices",
                              "name": "IP Address",
                              "modify": "x.ip"
                            },
                            {
                              "data": "devices",
                              "name": "MAC Address",
                              "modify": "x.mac"
                            }
                          ],
                          "card_mod": {
                            "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Controls",
                      "align": "left"
                    }
                  ]
                },
                {
                  "square": false,
                  "columns": 2,
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.aimesh_router_wireless_5_ghz",
                      "name": "5 GHz",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle the Wi-Fi network?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.aimesh_router_wireless_2_4_ghz",
                      "name": "2.4 GHz",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle the Wi-Fi network?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.aimesh_router_led",
                      "name": "LED",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_router_boot_time",
                      "name": "Reboot router",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "hold_action": {
                        "action": "more-info"
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "button.press",
                        "data": {},
                        "target": {
                          "entity_id": "button.aimesh_router_reboot"
                        },
                        "confirmation": {
                          "text": "Are you sure you want to restart the router?"
                        }
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:vertical-stack-in-card",
              "cards": [
                {
                  "type": "entities",
                  "title": "AiMesh node",
                  "icon": "mdi:earth",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "CPU",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.aimesh_node_cpu",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.aimesh_node_ram",
                      "name": "RAM",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Temperature",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.aimesh_node_cpu_temperature",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_node_boot_time",
                      "name": "Boot time",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "icon_color": "disabled"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{states(entity) | float(-99) | round(1)}} {{state_attr(entity, 'unit_of_measurement')}}",
                      "secondary": "CPU",
                      "icon": "mdi:thermometer",
                      "entity": "sensor.aimesh_node_cpu_temperature",
                      "layout": "vertical",
                      "fill_container": true
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Controls",
                      "align": "left"
                    }
                  ]
                },
                {
                  "square": false,
                  "columns": 2,
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.aimesh_node_wireless_5_ghz",
                      "name": "5 GHz",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle the Wi-Fi network?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.aimesh_node_wireless_2_4_ghz",
                      "name": "2.4 GHz",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle the Wi-Fi network?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.aimesh_node_led",
                      "name": "LED",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.aimesh_node_boot_time",
                      "name": "Reboot node",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "hold_action": {
                        "action": "more-info"
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "button.press",
                        "data": {},
                        "target": {
                          "entity_id": "button.aimesh_node_reboot"
                        },
                        "confirmation": {
                          "text": "Are you sure you want to restart the router?"
                        }
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "cards": [
                {
                  "type": "entities",
                  "title": "Home - Server - 01 (Pi-hole & SNTP)",
                  "icon": "mdi:earth",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "CPU",
                  "color_thresholds": [
                    {
                      "color": "#159F3B",
                      "value": 0
                    },
                    {
                      "color": "#F2B528",
                      "value": 50
                    },
                    {
                      "color": "#DD5129",
                      "value": 80
                    }
                  ],
                  "decimals": 1,
                  "entities": [
                    {
                      "entity": "sensor.home_server_01_rpi_cpu",
                      "name": "CPU",
                      "show_state": true,
                      "state_adaptive_color": true
                    },
                    {
                      "entity": "sensor.home_server_01_rpi_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "state_adaptive_color": true
                    }
                  ],
                  "font_size": 75,
                  "hour24": true,
                  "hours_to_show": 1,
                  "line_width": 3,
                  "points_per_hour": 120,
                  "update_interval": 10,
                  "lower_bound": 0,
                  "upper_bound": 100
                },
                {
                  "type": "custom:apexcharts-card",
                  "chart_type": "radialBar",
                  "header": {
                    "show": true,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "series": [
                    {
                      "entity": "sensor.home_server_01_rpi_monitor_ram_used_percentage",
                      "name": "RAM"
                    },
                    {
                      "entity": "sensor.home_server_01_rpi_sdcard_used",
                      "name": "SD card"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "DNS queries",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "custom:apexcharts-card",
                  "stacked": true,
                  "graph_span": "1d",
                  "layout": "minimal",
                  "header": {
                    "show": true,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "all_series_config": {
                    "type": "area",
                    "float_precision": 1,
                    "unit": "%",
                    "show": {
                      "legend_value": false
                    }
                  },
                  "series": [
                    {
                      "entity": "sensor.pi_hole_ads_percentage_blocked_today",
                      "name": "Blocked",
                      "color": "#F56954",
                      "type": "area"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_cached_today",
                      "name": "Cached",
                      "color": "#3CFFBC"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_forwarded_today",
                      "name": "Forwarded",
                      "color": "#00C0EF"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_others_today",
                      "name": "Others"
                    }
                  ]
                },
                {
                  "type": "custom:apexcharts-card",
                  "chart_type": "donut",
                  "header": {
                    "show": false,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "all_series_config": {
                    "float_precision": 1,
                    "unit": "%"
                  },
                  "series": [
                    {
                      "entity": "sensor.pi_hole_ads_percentage_blocked_today",
                      "name": "Blocked",
                      "color": "#F56954"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_cached_today",
                      "name": "Cached",
                      "color": "#3CFFBC"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_forwarded_today",
                      "name": "Forwarded",
                      "color": "#00C0EF"
                    },
                    {
                      "entity": "sensor.pi_hole_percentage_others_today",
                      "name": "Others"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Diagnostics",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "primary_info": "state",
                      "secondary_info": "name",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "sensor.rpi_monitor_pihole",
                      "icon_color": "blue",
                      "icon": "mdi:ip-network",
                      "secondary": "Internal IP",
                      "primary": "{% set networking = state_attr(entity, 'networking') %}\n{{ networking.eth0.IP }}",
                      "tap_action": {
                        "action": "none"
                      },
                      "hold_action": {
                        "action": "none"
                      },
                      "double_tap_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "icon": "mdi:restart",
                      "primary_info": "state",
                      "layout": "vertical",
                      "icon_color": "disabled",
                      "entity": "sensor.rpi_monitor_pihole",
                      "secondary": "Boot time",
                      "primary": "{{ state_attr(entity, 'up_time') }}",
                      "fill_container": true
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:text-divider-row",
                      "text": "Controls",
                      "align": "left"
                    }
                  ]
                },
                {
                  "type": "grid",
                  "square": false,
                  "columns": 3,
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "primary_info": "name",
                      "secondary_info": "state",
                      "layout": "vertical",
                      "tap_action": {
                        "action": "toggle",
                        "confirmation": {
                          "text": "Are you sure you want to toggle the Wi-Fi network?"
                        }
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "double_tap_action": {
                        "action": "none"
                      },
                      "entity": "switch.pi_hole",
                      "name": "Pi-Hole"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Devices",
          "path": "devices",
          "badges": [],
          "cards": [
            {
              "type": "custom:battery-state-card",
              "title": "Filters",
              "sort_by_level": "asc",
              "color_thresholds": [
                {
                  "value": 15,
                  "color": "red"
                },
                {
                  "value": 25,
                  "color": "yellow"
                },
                {
                  "value": 35,
                  "color": "green"
                }
              ],
              "filter": {
                "include": [
                  {
                    "name": "attributes.device_class",
                    "value": "battery"
                  }
                ],
                "exclude": [
                  {
                    "name": "state",
                    "value": 35,
                    "operator": ">"
                  },
                  {
                    "name": "state",
                    "value": "Unknown"
                  },
                  {
                    "name": "entity_id",
                    "value": "binary_sensor.*"
                  },
                  {
                    "name": "entity_id",
                    "value": "*phone*"
                  },
                  {
                    "name": "entity_id",
                    "value": "*tablet*"
                  },
                  {
                    "name": "entity_id",
                    "value": "*laptop*"
                  },
                  {
                    "name": "entity_id",
                    "value": "*abisko*"
                  },
                  {
                    "name": "entity_id",
                    "value": "*sm_g981b*"
                  }
                ]
              },
              "tap_action": {
                "action": "more-info"
              }
            },
            {
              "type": "custom:battery-state-card",
              "title": "Devices temperatures",
              "icon": "mdi:thermometer",
              "color_thresholds": [
                {
                  "value": 18,
                  "color": "blue"
                },
                {
                  "value": 65,
                  "color": "green"
                },
                {
                  "value": 80,
                  "color": "yellow"
                },
                {
                  "value": 500,
                  "color": "red"
                }
              ],
              "tap_action": {
                "action": "more-info"
              },
              "sort_by_level": "desc",
              "unit": "°C",
              "round": 1,
              "filter": {
                "include": [
                  {
                    "name": "entity_id",
                    "value": "sensor.*device_temperature*"
                  }
                ]
              }
            }
          ]
        },
        {
          "title": "Climate",
          "path": "climate",
          "icon": "",
          "badges": [],
          "cards": [
            {
              "type": "custom:weather-card",
              "entity": "weather.home",
              "number_of_forecasts": "7",
              "details": true,
              "forecast": false,
              "hourly_forecast": true,
              "current": true
            },
            {
              "square": false,
              "columns": 2,
              "title": "Bathroom",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.bathroom_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.bathroom_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.bathroom_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.bathroom_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Bedroom",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.bedroom_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.bedroom_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.bedroom_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.bedroom_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Guest room",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.guest_room_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.guest_room_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.guest_room_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.guest_room_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Guest room - Closet",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.guest_room_closet_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.guest_room_closet_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.guest_room_closet_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.guest_room_closet_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Kitchen",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.kitchen_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.kitchen_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.kitchen_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.kitchen_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Living room",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.living_room_thermostat_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.living_room_thermostat_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.living_room_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.living_room_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "square": false,
              "columns": 2,
              "title": "Office",
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 1,
                  "group": false,
                  "animate": true,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.office_thermostat_1_current_temperature",
                      "name": "Temperature",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 15,
                      "color": "red"
                    },
                    {
                      "value": 18,
                      "color": "blue"
                    },
                    {
                      "value": 20,
                      "color": "green"
                    },
                    {
                      "value": 23,
                      "color": "orange"
                    },
                    {
                      "value": 24,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "custom:mini-graph-card",
                  "hours_to_show": 24,
                  "points_per_hour": 6,
                  "decimals": 0,
                  "group": false,
                  "animate": true,
                  "lower_bound": 0,
                  "show": {
                    "legend": false,
                    "state": true,
                    "icon": false,
                    "extrema": false
                  },
                  "entities": [
                    {
                      "entity": "sensor.office_thermostat_1_current_humidity",
                      "name": "Humidity",
                      "show_state": true,
                      "show_graph": true
                    }
                  ],
                  "color_thresholds": [
                    {
                      "value": 65,
                      "color": "red"
                    },
                    {
                      "value": 60,
                      "color": "blue"
                    },
                    {
                      "value": 43,
                      "color": "green"
                    },
                    {
                      "value": 37,
                      "color": "orange"
                    },
                    {
                      "value": 30,
                      "color": "red"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "sensor.office_thermostat_cloud_heating",
                      "state_not": "0.0"
                    }
                  ],
                  "card": {
                    "type": "custom:mini-graph-card",
                    "hours_to_show": 24,
                    "points_per_hour": 6,
                    "decimals": 1,
                    "group": false,
                    "animate": true,
                    "lower_bound": 0,
                    "show": {
                      "legend": false,
                      "state": true,
                      "icon": false
                    },
                    "entities": [
                      {
                        "entity": "sensor.office_thermostat_cloud_heating",
                        "name": "Heating",
                        "show_state": true,
                        "show_graph": true
                      }
                    ],
                    "color_thresholds": [
                      {
                        "value": 0,
                        "color": "green"
                      },
                      {
                        "value": 25,
                        "color": "orange"
                      },
                      {
                        "value": 100,
                        "color": "red"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "type": "grid",
              "title": "Humidifiers",
              "cards": [
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "name": "Bedroom",
                  "icon": "mdi:water-percent",
                  "show_state": true,
                  "entity": "switch.bedroom_power_strip_1_socket_3"
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "name": "Living room",
                  "icon": "mdi:water-percent",
                  "show_state": true,
                  "entity": "switch.living_room_charging_strip_1_socket_1"
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "name": "Office",
                  "icon": "mdi:water-percent",
                  "show_state": true,
                  "entity": "switch.office_workstation_power_strip_switch_1"
                }
              ]
            },
            {
              "type": "custom:plotly-graph",
              "entities": [
                {
                  "entity": "sensor.bathroom_thermostat_current_temperature",
                  "name": "Bathroom"
                },
                {
                  "entity": "sensor.bedroom_thermostat_current_temperature",
                  "name": "Bedroom"
                },
                {
                  "entity": "sensor.corridor_air_quality_temperature",
                  "name": "Corridor"
                },
                {
                  "entity": "sensor.guest_room_thermostat_current_temperature",
                  "name": "Guest room"
                },
                {
                  "entity": "sensor.living_room_thermostat_current_temperature",
                  "name": "Living room"
                },
                {
                  "entity": "sensor.corridor_air_quality_temperature",
                  "name": "Corridor"
                }
              ],
              "layout": {
                "dragmode": "pan",
                "showlegend": true,
                "yaxis": {
                  "rangemode": "tozero",
                  "title": {
                    "text": "Temperature"
                  },
                  "fixedrange": true
                },
                "yaxis2": {
                  "visible": false
                }
              },
              "title": "Climate",
              "hours_to_show": 24,
              "refresh_interval": "auto"
            }
          ]
        },
        {
          "title": "Surveillance",
          "path": "surveillance",
          "badges": [],
          "cards": [
            {
              "type": "alarm-panel",
              "states": [
                "arm_home",
                "arm_away"
              ],
              "entity": "alarm_control_panel.eufy_hub",
              "name": "Camera mode"
            },
            {
              "type": "grid",
              "square": false,
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.hall_camera_streaming_sensor",
                      "state": "False"
                    }
                  ],
                  "card": {
                    "type": "picture-entity",
                    "entity": "camera.hall_camera",
                    "tap_action": {
                      "action": "call-service",
                      "service": "camera.turn_on",
                      "target": {
                        "entity_id": "camera.hall_camera"
                      }
                    }
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.hall_camera_streaming_sensor",
                      "state": "True"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:webrtc-camera",
                        "entity": "camera.hall_camera"
                      },
                      {
                        "type": "button",
                        "name": "Stop Streaming",
                        "show_state": false,
                        "show_icon": false,
                        "tap_action": {
                          "action": "call-service",
                          "service": "camera.turn_off",
                          "target": {
                            "entity_id": "camera.hall_camera"
                          }
                        }
                      }
                    ]
                  }
                }
              ],
              "columns": 1
            },
            {
              "type": "grid",
              "square": false,
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_door_camera_streaming_sensor",
                      "state": "False"
                    }
                  ],
                  "card": {
                    "type": "picture-entity",
                    "entity": "camera.office_camera",
                    "tap_action": {
                      "action": "call-service",
                      "service": "camera.turn_on",
                      "target": {
                        "entity_id": "camera.office_camera"
                      }
                    }
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_door_camera_streaming_sensor",
                      "state": "True"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:webrtc-camera",
                        "entity": "camera.office_camera"
                      },
                      {
                        "type": "button",
                        "name": "Stop Streaming",
                        "show_state": false,
                        "show_icon": false,
                        "tap_action": {
                          "action": "call-service",
                          "service": "camera.turn_off",
                          "target": {
                            "entity_id": "camera.office_camera"
                          }
                        }
                      }
                    ]
                  }
                }
              ],
              "columns": 1
            },
            {
              "type": "grid",
              "square": false,
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.living_room_camera_streaming_sensor",
                      "state": "False"
                    }
                  ],
                  "card": {
                    "type": "picture-entity",
                    "entity": "camera.living_room_camera",
                    "tap_action": {
                      "action": "call-service",
                      "service": "camera.turn_on",
                      "target": {
                        "entity_id": "camera.living_room_camera"
                      }
                    }
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.living_room_camera_streaming_sensor",
                      "state": "True"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:webrtc-camera",
                        "entity": "camera.living_room_camera"
                      },
                      {
                        "type": "button",
                        "name": "Stop Streaming",
                        "show_state": false,
                        "show_icon": false,
                        "tap_action": {
                          "action": "call-service",
                          "service": "camera.turn_off",
                          "target": {
                            "entity_id": "camera.living_room_camera"
                          }
                        }
                      }
                    ]
                  }
                }
              ],
              "columns": 1
            },
            {
              "type": "grid",
              "square": false,
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_windows_camera_streaming_sensor",
                      "state": "False"
                    }
                  ],
                  "card": {
                    "type": "picture-entity",
                    "entity": "camera.dogs_mat_camera",
                    "tap_action": {
                      "action": "call-service",
                      "service": "camera.turn_on",
                      "target": {
                        "entity_id": "camera.dogs_mat_camera"
                      }
                    }
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.office_windows_camera_streaming_sensor",
                      "state": "True"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:webrtc-camera",
                        "entity": "camera.dogs_mat_camera"
                      },
                      {
                        "type": "button",
                        "name": "Stop Streaming",
                        "show_state": false,
                        "show_icon": false,
                        "tap_action": {
                          "action": "call-service",
                          "service": "camera.turn_off",
                          "target": {
                            "entity_id": "camera.dogs_mat_camera"
                          }
                        }
                      }
                    ]
                  }
                }
              ],
              "columns": 1
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Sandbox",
          "path": "sandbox",
          "subview": true,
          "visible": [
            {
              "user": "07ef2bff2a014fc9a1f8cd3bbd3d1ab6"
            },
            {
              "user": "29891fd3b40845868c3614281d746104"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "custom:auto-entities",
              "show_empty": false,
              "sort": {
                "method": "state",
                "numeric": true,
                "reverse": true
              },
              "card": {
                "type": "custom:bar-card",
                "title": "Power sensors",
                "positions": {
                  "icon": "off"
                },
                "height": "20px",
                "min": 0,
                "max": 2500,
                "severity": [
                  {
                    "color": "red",
                    "from": 1000,
                    "to": 99999
                  },
                  {
                    "color": "orange",
                    "from": 200,
                    "to": 1000
                  },
                  {
                    "color": "yellow",
                    "from": 50,
                    "to": 200
                  },
                  {
                    "color": "green",
                    "from": 0,
                    "to": 50
                  }
                ]
              },
              "filter": {
                "include": [
                  {
                    "domain": "sensor",
                    "device_manufacturer": "Shelly",
                    "attributes": {
                      "device_class": "power"
                    },
                    "area": "Kitchen"
                  }
                ]
              }
            },
            {
              "type": "custom:auto-entities",
              "card": {
                "type": "entities",
                "title": "All groups"
              },
              "filter": {
                "include": [
                  {
                    "domain": "group",
                    "options": {
                      "type": "custom:fold-entity-row"
                    }
                  }
                ]
              }
            },
            {
              "type": "custom:sun-card"
            },
            {
              "type": "custom:mini-graph-card",
              "hours_to_show": 0.1,
              "points_per_hour": 3600,
              "animate": true,
              "lower_bound": 0,
              "show": {
                "legend": false,
                "state": true
              },
              "entities": [
                {
                  "entity": "sensor.total_power",
                  "decimals": 1,
                  "show_state": true,
                  "show_graph": true
                },
                {
                  "entity": "sensor.electricity_price",
                  "show_state": true,
                  "show_graph": false
                }
              ],
              "color_thresholds": [
                {
                  "value": 0,
                  "color": "#00ff80"
                },
                {
                  "value": 300,
                  "color": "gold"
                },
                {
                  "value": 1000,
                  "color": "#ff0000"
                }
              ]
            },
            {
              "type": "custom:auto-entities",
              "show_empty": false,
              "card": {
                "type": "entities",
                "title": "Lights on",
                "show_header_toggle": false,
                "state_color": true
              },
              "filter": {
                "include": [
                  {
                    "area": "Balcony"
                  },
                  {
                    "area": "Bedroom"
                  },
                  {
                    "area": "Bathroom"
                  }
                ],
                "exclude": [
                  {
                    "state": "off"
                  },
                  {
                    "state": "unavailable"
                  },
                  {
                    "not": {
                      "domain": "light"
                    }
                  }
                ]
              }
            },
            {
              "type": "markdown",
              "style": "ha-card {\n  --mdc-icon-size: 16px;\n}\n#Vasttrafik tr td:nth-child(2n){\n font-weight : bold\n}\nth, td {\nborder-bottom: 1px solid #ddd;\n}\n",
              "content": "{% set icons = { 'TRAM': 'mdi:tram-side', 'BUS': 'mdi:bus', 'BOAT': 'mdi:ferry'} %} {% set ns=namespace(sname=[], fgColor=[], bgColor=[]) %} <table class=\"Vasttrafik\" border=1>\n  <tr>\n    <th>Line</th>\n    <th>Direction</th>\n    <th>Departure</th>\n    <th>Platform</th>\n  </tr>\n{%- for departure in state_attr('sensor.vasttrafik_departure_table', 'Departure') %}\n  <tr valign=middle>\n    <td align=center>{{ departure.sname | default(\"?\") }}</td>\n    <td>{{ departure.direction | default(\"?\") }}</td>\n    {%- set time = departure.rtTime if departure.rtTime | default(false) else departure.Time | default(\"?\") %}\n    {%- set date = departure.rtDate if departure.rtDate | default(false) else departure.Date | default(\"?\") %}\n    {%- set minutes = ((as_timestamp((date + ' ' + time) | as_datetime) - as_timestamp(now())) / 60) | round(0) %}\n    <td align=center>{{ iif(minutes>0, minutes, 'Now') }}</td>\n    <td align=center>{{ departure.track | default(\"?\") }}&nbsp;<ha-icon icon=\"{{ icons[departure.type] | default(\"mdi:help\")}}\"></ha-icon></td>\n  </tr>\n{%- endfor %}  </table>",
              "title": "Västtrafik - SKF"
            },
            {
              "type": "custom:flex-table-card",
              "title": "Västtrafik - SKF",
              "strict": true,
              "max_rows": 20,
              "sort_by": [
                "Departure+"
              ],
              "entities": {
                "include": "sensor.vasttrafik_departure_table"
              },
              "columns": [
                {
                  "name": "Sort column",
                  "data": "Departure",
                  "align": "center",
                  "hidden": true,
                  "modify": "Math.round((Date.parse((x.rtDate ? x.rtDate : x.Date) + \" \" + (x.rtTime ? x.rtTime : x.Time)) - Date.now())/60000)"
                },
                {
                  "name": "Line",
                  "data": "Departure",
                  "modify": "x.sname",
                  "align": "center"
                },
                {
                  "name": "Direction",
                  "data": "Departure",
                  "modify": "x.direction"
                },
                {
                  "name": "Departure",
                  "data": "Departure",
                  "align": "center",
                  "modify": "if (typeof(x.rtTime) == \"string\" & typeof(x.rtDate) == \"string\") \n  { \n    var minutes = Math.round(Math.max(0,(Date.parse(x.rtDate + \" \" + x.rtTime) - Date.now())/60000));\n    if (minutes>=60)\n      {{ x.rtTime }}\n    else\n      {{ minutes }}\n  }\nelse\n  { \n    var minutes = Math.round(Math.max(0,(Date.parse(x.Date + \" \" + x.Time) - Date.now())/60000));\n    if (minutes>=60)\n      {{ x.Time }}\n    else\n      {{ minutes }}\n  }"
                },
                {
                  "name": "Platform",
                  "data": "Departure",
                  "align": "center",
                  "modify": "x.track + '&nbsp;<ha-icon icon=\"mdi:' + x.type.toLowerCase().replace(\"tram\", \"tram-side\") +  '\"></ha-icon>'"
                }
              ],
              "css": null,
              "style": "ha-card {\n  --mdc-icon-size: 16px;\n}\n#Vasttrafik tr td:nth-child(2n){\n font-weight : bold\n}\nth, td {\nborder-bottom: 1px solid #ddd;\n}\n"
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:mushroom-title-card",
                  "title": "{{ iif(is_state('light.home_all_lights', 'on'), 'Lights on:', 'No lights on') }}",
                  "alignment": "center"
                },
                {
                  "square": true,
                  "columns": 2,
                  "type": "grid",
                  "cards": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.balcony_lamp_light",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.balcony_lamp_light",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "layout": "vertical",
                        "name": "Balcony - Lamp",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.balcony_string_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.balcony_string_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "layout": "vertical",
                        "name": "Balcony - String lights",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.bathroom_all_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.bathroom_all_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Bathroom",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.bedroom_closet_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.bedroom_closet_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Bedroom - Closet",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.bedroom_carol_light",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.bedroom_carol_light",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Bedroom - Carol",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.bedroom_edward_light",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.bedroom_edward_light",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Bedroom - Edward",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.corridor_lights_all",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.corridor_lights_all",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Corridor",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.guest_room_closet_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.guest_room_closet_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Guest room - Closet",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.guest_bathroom_all_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.guest_bathroom_all_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Guest bathroom",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.guest_room_wall_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.guest_room_wall_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Guest room",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.hall_all_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.hall_all_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Hall",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": false,
                        "show_color_control": false,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.kitchen_bench_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.kitchen_bench_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Kitchen - Bench",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.kitchen_table_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.kitchen_table_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Kitchen - Table",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.office_ceiling_lines",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.office_ceiling_lines",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Office - Lines",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.office_workstation_lights",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.office_workstation_lights",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Office - Workstation",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.curtains_lights_segment_kitchen",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "custom:mushroom-light-card",
                        "entity": "light.curtains_lights_segment_kitchen",
                        "show_brightness_control": true,
                        "collapsible_controls": true,
                        "secondary_info": "none",
                        "name": "Curtain's lights",
                        "layout": "vertical",
                        "use_light_color": true,
                        "show_color_temp_control": true,
                        "show_color_control": true,
                        "fill_container": true
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "LAN",
          "path": "lan",
          "type": "panel",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "custom:flex-table-card",
              "sort_by": [
                "devices+"
              ],
              "entities": {
                "include": "sensor.aimesh_router_connected_devices"
              },
              "columns": [
                {
                  "data": "devices",
                  "modify": "x.ip",
                  "hidden": true
                },
                {
                  "data": "devices",
                  "name": " Device Name",
                  "icon": "mdi:devices",
                  "modify": "x.name"
                },
                {
                  "data": "devices",
                  "name": " Address",
                  "icon": "mdi:ip-network",
                  "modify": "x.ip"
                },
                {
                  "data": "devices",
                  "name": " MAC",
                  "icon": "mdi:barcode-scan",
                  "modify": "x.mac"
                },
                {
                  "data": "devices",
                  "name": "Connection type",
                  "modify": "x.connection_type"
                },
                {
                  "data": "devices",
                  "name": "AiMesh node",
                  "modify": "x.node.replace('7c:10:c9:b0:2e:60','Node').replace('7c:10:c9:b0:49:e0','Router')"
                }
              ],
              "card_mod": {
                "style": "ha-card {\n  box-shadow: none;\n  background: none;\n}\n"
              }
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "NordPool",
          "path": "nordpool",
          "subview": true,
          "type": "panel",
          "badges": [],
          "cards": [
            {
              "type": "custom:plotly-graph",
              "time_offset": "1.5d",
              "refresh_interval": 300,
              "hours_to_show": 84,
              "layout": {
                "xaxis": {
                  "rangeselector": {
                    "y": 1.2,
                    "buttons": [
                      {
                        "count": 7,
                        "step": "day"
                      },
                      {
                        "count": 12,
                        "step": "day"
                      }
                    ]
                  }
                },
                "yaxis": {
                  "rangemode": "tozero",
                  "tickformat": ".1f"
                },
                "yaxis2": {
                  "rangemode": "tozero",
                  "tickformat": ".2f",
                  "fixrange": true
                },
                "yaxis9": {
                  "visible": false,
                  "fixedrange": true
                }
              },
              "round": 2,
              "default": null,
              "entities": [
                {
                  "entity": "sensor.total_energy_utility_meter",
                  "name": "Energy consumption",
                  "type": "bar",
                  "marker": {
                    "color": "rgba(165,165,0,0.6)"
                  },
                  "texttemplate": " %{y:.2f} kr/kWh",
                  "statistic": "state",
                  "period": "hour",
                  "filters": [
                    {
                      "fn": "(params) => {\n  const ys = [];\n  ys.push(0); \n  for (let i = 1; i < params.statistics.length; i++){\n    ys.push(params.statistics[i].state-params.statistics[i-1].state);\n  }\n  return { ys };\n}"
                    }
                  ]
                },
                {
                  "entity": "sensor.nordpool_kwh_se3_sek_3_10_025",
                  "name": "Electricity price",
                  "yaxis": "y2",
                  "unit_of_measurement": "kr/kWh",
                  "line": {
                    "color": "rgba(255, 165, 0, 1)",
                    "width": 3
                  },
                  "filters": [
                    {
                      "store_var": "electricity_price"
                    },
                    {
                      "exponential_moving_average": {
                        "alpha": 1
                      }
                    }
                  ],
                  "show_value": true,
                  "texttemplate": " %{y:.2f} kr/kWh"
                },
                {
                  "entity": "sensor.nordpool_kwh_se3_sek_3_10_025",
                  "yaxis": "y2",
                  "name": "Future price",
                  "fill": "tozeroy",
                  "fillcolor": "rgba(255, 165, 0,.1)",
                  "line": {
                    "color": "rgba(255, 165, 0, 1)",
                    "width": 1,
                    "dash": "dot"
                  },
                  "filters": [
                    {
                      "fn": "({ meta, vars }) => ({\n  xs: [vars.electricity_price.xs.slice(-1)[0],...meta.raw_today.concat(...meta.raw_tomorrow).map(({ start }) => new Date(start))],\n  ys: [vars.electricity_price.ys.slice(-1)[0],...meta.raw_today.concat(...meta.raw_tomorrow).map(({ value }) => value)],\n})"
                    },
                    {
                      "exponential_moving_average": {
                        "alpha": 1
                      }
                    }
                  ]
                },
                {
                  "entity": "",
                  "name": "Now",
                  "yaxis": "y9",
                  "showlegend": false,
                  "line": {
                    "width": 1,
                    "dash": "dot",
                    "color": "deepskyblue"
                  },
                  "x": "$fn () => [Date.now(), Date.now()]",
                  "y": "$fn () => [0,1]"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Balcony",
          "path": "balcony",
          "subview": true,
          "type": "panel",
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:mushroom-chips-card",
                  "chips": [
                    {
                      "type": "back"
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Balcony",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/balcony"
                      },
                      "hold_action": {
                        "action": "none"
                      },
                      "card_mod": null,
                      "style": "ha-card {\n  --chip-background: gray;\n}\n"
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Bathroom",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Bedroom",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Corridor",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Guest bathroom",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Guest room",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Hall",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Laundry",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Living room",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "template",
                      "double_tap_action": {
                        "action": "none"
                      },
                      "content": "Office",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": ""
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "menu"
                    }
                  ],
                  "alignment": "center"
                },
                {
                  "type": "custom:mushroom-title-card",
                  "title": "Balcony",
                  "alignment": "center",
                  "title_tap_action": {
                    "action": "none"
                  },
                  "subtitle_tap_action": {
                    "action": "none"
                  }
                },
                {
                  "square": false,
                  "columns": 3,
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.balcony_string_lights",
                      "name": "String lights",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.balcony_lamp_light",
                      "name": "Lamp",
                      "layout": "vertical",
                      "fill_container": true,
                      "secondary_info": "state",
                      "use_light_color": false,
                      "show_brightness_control": false,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:decluttering-card",
                      "template": "template_socket",
                      "variables": [
                        {
                          "entity_id": "switch.balcony_lamp_sockets"
                        }
                      ]
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "weather.home",
                      "fill_container": true,
                      "layout": "vertical",
                      "primary_info": "state",
                      "secondary_info": "none"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "{{ state_attr(entity, 'temperature') }}°C",
                      "secondary": "",
                      "icon": "mdi:thermometer",
                      "icon_color": "{% set curr = state_attr(entity, 'temperature') | float(-99) %} {% set high_value = 22 %} {% set high_red = 255 %} {% set high_green = 0 %} {% set high_blue = 0 %} {% set mid_h_value = 19 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 15 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 6 %} {% set low_red = 0 %} {% set low_green = 0 %} {% set low_blue = 255 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "entity": "weather.home",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "weather.home",
                      "primary": "{{ state_attr(entity, 'humidity') }}%",
                      "secondary": "",
                      "icon": "mdi:water-percent",
                      "icon_color": "{% set curr = state_attr(entity, 'humidity') | float(-99) %} {% set high_value = 90 %} {% set high_red = 0 %} {% set high_green = 0 %} {% set high_blue = 255 %} {% set mid_h_value = 60 %} {% set mid_h_red = 0 %} {% set mid_h_green = 255 %} {% set mid_h_blue = 0 %} {% set mid_l_value = 40 %} {% set mid_l_red = 0 %} {% set mid_l_green = 255 %} {% set mid_l_blue = 0 %} {% set low_value = 30 %} {% set low_red = 255 %} {% set low_green = 0 %} {% set low_blue = 0 %} {% if curr > mid_h_value %}\n  {% set curr_point = (curr - mid_h_value) / (high_value - mid_h_value) %}\n  {% set red = (curr_point * (high_red - mid_h_red) + mid_h_red) %}\n  {% set green = (curr_point * (high_green - mid_h_green) + mid_h_green) %}\n  {% set blue = (curr_point * (high_blue - mid_h_blue) + mid_h_blue) %}\n{% elif curr > mid_l_value %}\n  {% set curr_point = (curr - mid_h_value) / (mid_h_value - mid_l_value) %}\n  {% set red = (curr_point * (mid_h_red - mid_l_red) + mid_l_red) %}\n  {% set green = (curr_point * (mid_h_green - mid_l_green) + mid_l_green) %}\n  {% set blue = (curr_point * (mid_h_blue - mid_l_blue) + mid_l_blue) %}\n{% else %}\n  {% set curr_point = (mid_l_value - curr) / (mid_l_value - low_value) %}\n  {% set red = mid_l_red - (curr_point * (mid_l_red - low_red)) %}\n  {% set green = mid_l_green - (curr_point * (mid_l_green - low_green)) %}\n  {% set blue = mid_l_blue - (curr_point * (mid_l_blue - low_blue)) %}\n{% endif %} {% set red = min(255, max(0, red | round(0) )) %} {% set green = min(255, max(0, green | round(0) )) %} {% set blue = min(255, max(0, blue | round(0) )) %} {{ '#' + '%02x' | format( red | int ) + '%02x' | format( green | int ) + '%02x' | format( blue | int ) }}",
                      "layout": "vertical",
                      "fill_container": true,
                      "tap_action": {
                        "action": "more-info"
                      },
                      "hold_action": {
                        "action": "more-info"
                      }
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.balcony_curtain",
                      "layout": "vertical",
                      "fill_container": true,
                      "show_buttons_control": false,
                      "show_position_control": false,
                      "name": "Curtains"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  }
}